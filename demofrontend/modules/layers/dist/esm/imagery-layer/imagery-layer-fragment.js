export default "\n#define SHADER_NAME imagery-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D imageryTexture;\n\nvarying vec2 vTexCoord;\n\n// TODO/ib enables shader derivatives that facilitate debugging height maps\nvarying float vWorldHeight;\nconst float SLOPE_MAX = 0.10;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor / 255.0;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  return mix(transparentColor / 255.0, vec4(color, 1.0), alpha);\n}\n\nvoid main(void) {\n  vec4 bitmapColor = texture2D(imageryTexture, vTexCoord);\n\n  // TODO/ib - discard fragments when height is changing to quickly\n  // Uncomment to debug height maps\n  // If changing more than 5 centimeter per pixel discard\n  // if (abs(dFdx(vWorldHeight)) > SLOPE_MAX || abs(dFdy(vWorldHeight)) > SLOPE_MAX) {\n  //   discard;\n  // }\n\n  if (bitmapColor.rgb == vec3(0., 0., 0.)) {\n    discard;\n  };\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";
//# sourceMappingURL=imagery-layer-fragment.js.map