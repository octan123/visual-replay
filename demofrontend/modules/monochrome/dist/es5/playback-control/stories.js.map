{"version":3,"sources":["../../../src/playback-control/stories.js"],"names":["PLAYBACK_SPEEDS","CLIP_LENGTH","MARKERS","startTime","endTime","style","background","BUFFER_RANGE","PlaybackControlExample","isPlaying","currentTime","speed","setState","_onUpdateTimer","Date","now","window","cancelAnimationFrame","_timer","Number","lastUpdateTimestamp","timestamp","state","timeElapsed","newTime","requestAnimationFrame","bind","props","compact","showSpeedOptions","showMarkers","_onPlay","_onPause","_onSeek","flexGrow","String","_updateSpeed","Component","module","addDecorator","README","add"],"mappings":"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","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n/* Playback control example */\n/* global window */\nimport React, {Component} from 'react';\nimport {boolean} from '@storybook/addon-knobs';\nimport {storiesOf} from '@storybook/react';\nimport {withReadme} from 'storybook-readme';\n\nimport README from './README.md';\nimport PlaybackControl from './index';\nimport {Dropdown} from '../shared';\n\nconst PLAYBACK_SPEEDS = {\n  '-1': 'Reverse',\n  0.5: '0.5x Speed',\n  1: 'Normal',\n  2: '2x Speed'\n};\n\nconst CLIP_LENGTH = 20;\n\nconst MARKERS = [\n  {startTime: 0, endTime: 3, style: {background: '#ccc'}},\n  {startTime: 3, endTime: 14, style: {background: '#0a9'}},\n  {startTime: 14, endTime: 20, style: {background: '#fa0'}}\n];\n\nconst BUFFER_RANGE = [{startTime: 0, endTime: 15}];\n\nclass PlaybackControlExample extends Component {\n  state = {\n    isPlaying: false,\n    currentTime: 0,\n    speed: 1\n  };\n\n  _timer = null;\n\n  // A simple timer that simulates video playback\n  _onUpdateTimer(lastUpdateTimestamp) {\n    window.cancelAnimationFrame(this._timer);\n\n    const timestamp = Date.now();\n    const {currentTime, speed} = this.state;\n\n    // Update current time\n    const timeElapsed = (timestamp - lastUpdateTimestamp) / 1000;\n    // Loop around the clip\n    const newTime = (timeElapsed * speed + currentTime + CLIP_LENGTH) % CLIP_LENGTH;\n    this.setState({currentTime: newTime});\n\n    this._timer = window.requestAnimationFrame(this._onUpdateTimer.bind(this, timestamp));\n  }\n\n  _onPlay = () => {\n    this.setState({isPlaying: true});\n    this._onUpdateTimer(Date.now());\n  };\n\n  _onPause = () => {\n    this.setState({isPlaying: false});\n    window.cancelAnimationFrame(this._timer);\n  };\n\n  _onSeek = currentTime => {\n    this.setState({currentTime});\n  };\n\n  _updateSpeed = speed => {\n    this.setState({speed: Number(speed)});\n  };\n\n  render() {\n    const {compact = false, showSpeedOptions = false, showMarkers = false} = this.props;\n    const {isPlaying, currentTime, speed} = this.state;\n\n    return (\n      <PlaybackControl\n        compact={compact}\n        currentTime={currentTime}\n        startTime={0}\n        endTime={CLIP_LENGTH}\n        isPlaying={isPlaying}\n        markers={showMarkers ? MARKERS : []}\n        bufferRange={showMarkers ? BUFFER_RANGE : []}\n        onPlay={this._onPlay}\n        onPause={this._onPause}\n        onSeek={this._onSeek}\n      >\n        {showSpeedOptions && <div style={{flexGrow: 1}} />}\n        {showSpeedOptions && (\n          <Dropdown\n            key=\"speed-selector\"\n            className=\"speed-selector\"\n            data={PLAYBACK_SPEEDS}\n            value={String(speed)}\n            onChange={this._updateSpeed}\n          />\n        )}\n      </PlaybackControl>\n    );\n  }\n}\n\nstoriesOf('PlaybackControl', module)\n  .addDecorator(withReadme(README))\n  .add('Basic example', () => <PlaybackControlExample compact={boolean('compact', false)} />)\n  .add('Markers', () => (\n    <PlaybackControlExample showMarkers={true} compact={boolean('compact', false)} />\n  ))\n  .add('Custom controls', () => <PlaybackControlExample showSpeedOptions={true} />);\n"],"file":"stories.js"}