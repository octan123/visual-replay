{"version":3,"sources":["../../../src/shared/theme.js"],"names":["ThemeContext","React","createContext","createTheme","themeCache","Map","ThemeProvider","theme","children","resolvedTheme","get","set","evaluateStyle","userStyle","props","withTheme","Component","ThemedComponent","_theme","propTypes","defaultProps","base","DARK_THEME","LIGHT_THEME","__reset__","font","cursor","pointerEvents","background","fontFamily","fontSize","fontWeight","lineHeight","color","textColorPrimary","textAlign"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAmBA;;AACA;;;;;;;;;;AAEA,IAAMA,YAAY,GAAGC,kBAAMC,aAAN,CAAoBC,WAAW,CAAC,EAAD,CAA/B,CAArB;;AACA,IAAMC,UAAU,GAAG,IAAIC,GAAJ,EAAnB;;AAEO,SAASC,aAAT,OAA0C;AAAA,MAAlBC,KAAkB,QAAlBA,KAAkB;AAAA,MAAXC,QAAW,QAAXA,QAAW;AAC/C,MAAIC,aAAa,GAAGL,UAAU,CAACM,GAAX,CAAeH,KAAf,CAApB;;AACA,MAAI,CAACE,aAAL,EAAoB;AAClBA,IAAAA,aAAa,GAAGN,WAAW,CAACI,KAAD,CAA3B;AACAH,IAAAA,UAAU,CAACO,GAAX,CAAeJ,KAAf,EAAsBE,aAAtB;AACD;;AAED,SAAO,gCAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAEA;AAA9B,KAA8CD,QAA9C,CAAP;AACD;;AAEM,SAASI,aAAT,CAAuBC,SAAvB,EAAkCC,KAAlC,EAAyC;AAC9C,MAAI,CAACD,SAAL,EAAgB;AACd,WAAO,IAAP;AACD;;AACD,MAAI,OAAOA,SAAP,KAAqB,UAAzB,EAAqC;AACnC,WAAOA,SAAS,CAACC,KAAD,CAAhB;AACD;;AACD,SAAOD,SAAP;AACD;;AAEM,SAASE,SAAT,CAAmBC,SAAnB,EAA8B;AAAA,MAC7BC,eAD6B;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,+BAExB;AAAA;;AACP,eACE,gCAAC,YAAD,CAAc,QAAd,QACG,UAAAC,MAAM;AAAA,iBAAI,gCAAC,SAAD,gCAAe,KAAI,CAACJ,KAApB;AAA2B,YAAA,KAAK,EAAEI;AAAlC,aAAJ;AAAA,SADT,CADF;AAKD;AARgC;AAAA;AAAA,IACLjB,kBAAMe,SADD;;AAWnCC,EAAAA,eAAe,CAACE,SAAhB,GAA4BH,SAAS,CAACG,SAAtC;AACAF,EAAAA,eAAe,CAACG,YAAhB,GAA+BJ,SAAS,CAACI,YAAzC;AAEA,SAAOH,eAAP;AACD;;AAED,SAASd,WAAT,CAAqBI,KAArB,EAA4B;AAC1B,MAAIc,IAAI,GAAG,IAAX;;AAEA,UAAQd,KAAK,WAAb;AACE,SAAK,MAAL;AACEc,MAAAA,IAAI,GAAGC,kBAAP;AACA;;AAEF;AACED,MAAAA,IAAI,GAAGE,mBAAP;AACA;AAPJ;;AAUAhB,EAAAA,KAAK,mCAAOc,IAAP,GAAgBd,KAAhB,CAAL;AAGAA,EAAAA,KAAK,CAACiB,SAAN,GAAkB;AAChBC,IAAAA,IAAI,EAAE,SADU;AAEhBC,IAAAA,MAAM,EAAE,SAFQ;AAGhBC,IAAAA,aAAa,EAAE,SAHC;AAKhBC,IAAAA,UAAU,EAAErB,KAAK,CAACqB,UALF;AAMhBC,IAAAA,UAAU,EAAEtB,KAAK,CAACsB,UANF;AAOhBC,IAAAA,QAAQ,EAAEvB,KAAK,CAACuB,QAPA;AAQhBC,IAAAA,UAAU,EAAExB,KAAK,CAACwB,UARF;AAShBC,IAAAA,UAAU,EAAEzB,KAAK,CAACyB,UATF;AAUhBC,IAAAA,KAAK,EAAE1B,KAAK,CAAC2B,gBAVG;AAWhBC,IAAAA,SAAS,EAAE;AAXK,GAAlB;AAcA,SAAO5B,KAAP;AACD","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nimport React from 'react';\nimport {LIGHT_THEME, DARK_THEME} from './themes';\n\nconst ThemeContext = React.createContext(createTheme({}));\nconst themeCache = new Map();\n\nexport function ThemeProvider({theme, children}) {\n  let resolvedTheme = themeCache.get(theme);\n  if (!resolvedTheme) {\n    resolvedTheme = createTheme(theme);\n    themeCache.set(theme, resolvedTheme);\n  }\n\n  return <ThemeContext.Provider value={resolvedTheme}>{children}</ThemeContext.Provider>;\n}\n\nexport function evaluateStyle(userStyle, props) {\n  if (!userStyle) {\n    return null;\n  }\n  if (typeof userStyle === 'function') {\n    return userStyle(props);\n  }\n  return userStyle;\n}\n\nexport function withTheme(Component) {\n  class ThemedComponent extends React.Component {\n    render() {\n      return (\n        <ThemeContext.Consumer>\n          {_theme => <Component {...this.props} theme={_theme} />}\n        </ThemeContext.Consumer>\n      );\n    }\n  }\n\n  ThemedComponent.propTypes = Component.propTypes;\n  ThemedComponent.defaultProps = Component.defaultProps;\n\n  return ThemedComponent;\n}\n\nfunction createTheme(theme) {\n  let base = null;\n\n  switch (theme.extends) {\n    case 'dark':\n      base = DARK_THEME;\n      break;\n\n    default:\n      base = LIGHT_THEME;\n      break;\n  }\n\n  theme = {...base, ...theme};\n\n  // Reset inherited styles\n  theme.__reset__ = {\n    font: 'initial',\n    cursor: 'initial',\n    pointerEvents: 'initial',\n\n    background: theme.background,\n    fontFamily: theme.fontFamily,\n    fontSize: theme.fontSize,\n    fontWeight: theme.fontWeight,\n    lineHeight: theme.lineHeight,\n    color: theme.textColorPrimary,\n    textAlign: 'start'\n  };\n\n  return theme;\n}\n"],"file":"theme.js"}