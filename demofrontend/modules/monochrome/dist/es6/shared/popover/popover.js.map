{"version":3,"sources":["../../../../src/shared/popover/popover.js"],"names":["React","PropTypes","Popper","styled","withTheme","evaluateStyle","capitalize","getOppositePosition","generateTriangleStyles","nodeHasParent","positionsToPopperPlacement","isBrowser","document","Boolean","createElement","POSITIONS","TOP","RIGHT","BOTTOM","LEFT","AUTO","TRIGGERS","CLICK","HOVER","DEFAULT_ARROW_SIZE","DEFAULT_BORDER_WIDTH","PopoverComponent","div","props","display","userStyle","PopoverTarget","PopoverContent","PopoverBody","style","position","arrowSize","theme","__reset__","top","left","zIndex","background","borderStyle","borderWidth","borderColor","controlColorPrimary","boxShadow","shadow","fontFamily","fontSize","fontWeight","popperStyles","OuterArrow","popperOffsets","arrowOffsets","arrow","Object","assign","InnerArrow","isVertical","marginTop","marginLeft","POSITIONS_PROP_TYPE","oneOf","Popover","Component","constructor","_togglePopover","clearTimeout","hideTimer","_showPopover","_hidePopoverWithDelay","evt","key","_hidePopover","data","setState","offsets","popperPlacement","placement","styles","_getDefaultState","_destroyPopover","$popper","target","$target","state","componentDidUpdate","prevProps","prevState","isVisible","PopperClass","popperClass","popper","modifiers","element","$arrow","enabled","applyStyle","applyReactStyle","fn","_handlePopperUpdate","order","trigger","_addClickEvents","componentWillUnmount","_removeClickEvents","arrowPosition","onMouseOutDelay","setTimeout","addEventListener","_handleDocumentClick","_handleKeyPress","removeEventListener","destroy","_renderTarget","styleProps","interactionProps","onMouseEnter","_handleTargetMouseEnter","onMouseLeave","_handleTargetMouseLeave","onClick","_handleTargetClick","el","children","_renderArrow","arrowBorder","_renderBody","className","_handlePopoverMouseEnter","_handlePopoverMouseLeave","body","_renderContent","content","render","split","isActive","popover","string","object","oneOfType","node","func","isRequired","number","ThemedPopover"],"mappings":"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","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n/* global setTimeout, clearTimeout, document */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Popper from 'popper.js';\n\nimport styled from '@emotion/styled';\nimport {withTheme, evaluateStyle} from '../theme';\n\nimport {\n  capitalize,\n  getOppositePosition,\n  generateTriangleStyles,\n  nodeHasParent,\n  positionsToPopperPlacement\n} from './utils';\n\nconst isBrowser = typeof document !== 'undefined' && Boolean(document.createElement);\n\nexport const POSITIONS = {\n  TOP: 'top',\n  RIGHT: 'right',\n  BOTTOM: 'bottom',\n  LEFT: 'left',\n  AUTO: 'auto'\n};\n\nexport const TRIGGERS = {\n  CLICK: 'click',\n  HOVER: 'hover'\n};\n\nconst DEFAULT_ARROW_SIZE = 6;\nconst DEFAULT_BORDER_WIDTH = 1;\n\nconst PopoverComponent = styled.div(props => ({\n  /* Default wrapper style should ideally be display: inline so that popover\n  shows directly beneath child content, inline-flex just generally works\n  better than inline */\n  display: 'inline-flex',\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst PopoverTarget = styled.div(props => ({\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst PopoverContent = styled.div(props => ({\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst PopoverBody = styled.div(props => {\n  let style = null;\n  if (props.position && props.position !== POSITIONS.AUTO && props.arrowSize) {\n    style = {\n      [`margin${capitalize(getOppositePosition(props.position))}`]: props.arrowSize\n    };\n  }\n\n  return {\n    ...props.theme.__reset__,\n    ...style,\n\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    zIndex: 99,\n    background: props.background || props.theme.background,\n    borderStyle: 'solid',\n    borderWidth: props.borderWidth,\n    borderColor: props.borderColor || props.theme.controlColorPrimary,\n    boxShadow: props.theme.shadow,\n\n    fontFamily: props.theme.fontFamily,\n    fontSize: props.theme.fontSize,\n    fontWeight: 'normal',\n\n    ...props.popperStyles,\n    ...evaluateStyle(props.userStyle, props)\n  };\n});\n\nconst OuterArrow = styled.div(props => {\n  /**\n   * We create our arrow triangle using css borders, however this makes it\n   * difficult for us to add an actual border effect to the triangle. In order\n   * to achieve this effect, we generate two arrows and overlap them–an outer\n   * arrow with the border color, and an inner arrow with the background color.\n   */\n\n  const {position, arrowSize, popperOffsets} = props;\n\n  if (!arrowSize) {\n    return null;\n  }\n\n  const arrowOffsets = popperOffsets.arrow || {};\n\n  const style = {\n    borderColor: props.borderColor || props.theme.controlColorPrimary,\n    // Position the arrow to hang off the edge of the popover\n    // For example, a left-facing arrow would need the rule right: -{size}px\n    [getOppositePosition(position)]: -arrowSize\n  };\n\n  // Now apply arrow offsets calculated by popper library (if needed)\n  if (arrowOffsets.top) {\n    style.top = arrowOffsets.top;\n  }\n  if (arrowOffsets.left) {\n    style.left = arrowOffsets.left;\n  }\n\n  return Object.assign(\n    style,\n    evaluateStyle(props.userStyle, props),\n    generateTriangleStyles(position, arrowSize)\n  );\n});\n\nconst InnerArrow = styled.div(props => {\n  const {position, arrowSize} = props;\n\n  if (!arrowSize) {\n    return null;\n  }\n\n  const isVertical = position === POSITIONS.TOP || position === POSITIONS.BOTTOM;\n\n  const style = {\n    borderColor: props.background || props.theme.background\n  };\n\n  // Offset the inner arrow a couple pixels from its parent (the outer arrow)\n  if (isVertical) {\n    style.left = -arrowSize;\n    style.top = position === POSITIONS.TOP ? -arrowSize : 0;\n    style.marginTop = (position === POSITIONS.TOP ? -1 : 1) * props.borderWidth;\n  } else {\n    style.top = -arrowSize;\n    style.left = position === POSITIONS.LEFT ? -arrowSize : 0;\n    style.marginLeft = (position === POSITIONS.LEFT ? -1 : 1) * props.borderWidth;\n  }\n\n  return Object.assign(\n    style,\n    evaluateStyle(props.userStyle, props),\n    generateTriangleStyles(position, arrowSize)\n  );\n});\n\nconst POSITIONS_PROP_TYPE = PropTypes.oneOf([\n  POSITIONS.TOP,\n  POSITIONS.RIGHT,\n  POSITIONS.BOTTOM,\n  POSITIONS.LEFT,\n  POSITIONS.AUTO\n]);\n\nclass Popover extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    style: PropTypes.object,\n    content: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n    position: POSITIONS_PROP_TYPE,\n    // Arrow options\n    arrowPosition: POSITIONS_PROP_TYPE,\n    // Interaction\n    onMouseOutDelay: PropTypes.number,\n    trigger: PropTypes.oneOf([TRIGGERS.HOVER, TRIGGERS.CLICK]),\n    // Support injecting mock Popper class for tests\n    popperClass: PropTypes.func\n  };\n\n  static defaultProps = {\n    className: '',\n    style: {},\n    trigger: TRIGGERS.CLICK,\n    onMouseOutDelay: 0,\n    popperClass: Popper\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = this._getDefaultState(props);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // If we just switched to showing popover, create a new Popper for positioning\n    if (this.state.isVisible && !prevState.isVisible) {\n      const PopperClass = this.props.popperClass;\n      this.popper = new PopperClass(this.$target, this.$popper, {\n        placement: this.state.popperPlacement,\n        modifiers: {\n          // Passing the arrow ref will measure the arrow when calculating styles\n          arrow: {\n            element: this.$arrow,\n            enabled: true\n          },\n          // Disable default styling modifier, and use our custom react one instead\n          applyStyle: {enabled: false},\n          applyReactStyle: {\n            enabled: true,\n            fn: this._handlePopperUpdate,\n            order: 900\n          }\n        }\n      });\n\n      if (this.props.trigger === TRIGGERS.CLICK) {\n        this._addClickEvents();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this._destroyPopover();\n    this._removeClickEvents();\n  }\n\n  _getDefaultState(props) {\n    return {\n      isVisible: false,\n      popperOffsets: {},\n      popperPlacement: positionsToPopperPlacement(props.position, props.arrowPosition),\n      popperStyles: {}\n    };\n  }\n\n  _handleTargetClick = () => {\n    this._togglePopover();\n  };\n\n  _handleTargetMouseEnter = () => {\n    // If onMouseOutDelay is set and mouse is moving from popper back to target,\n    // we want to cancel any timers that would cause it to hide unexpectedly\n    clearTimeout(this.hideTimer);\n\n    this._showPopover();\n  };\n\n  _handleTargetMouseLeave = () => {\n    this._hidePopoverWithDelay();\n  };\n\n  _handlePopoverMouseEnter = () => {\n    clearTimeout(this.hideTimer);\n  };\n\n  _handlePopoverMouseLeave = () => {\n    this._hidePopoverWithDelay();\n  };\n\n  _handleKeyPress = evt => {\n    if (evt.key === 'Escape') {\n      this._hidePopover();\n    }\n  };\n\n  _handlePopperUpdate = data => {\n    this.setState({\n      popperOffsets: data.offsets,\n      popperPlacement: data.placement,\n      popperStyles: data.styles\n    });\n    return data;\n  };\n\n  _showPopover() {\n    this.setState({isVisible: true});\n  }\n\n  _hidePopover = () => {\n    this.setState(this._getDefaultState(this.props));\n    this._destroyPopover();\n  };\n\n  _hidePopoverWithDelay() {\n    const {onMouseOutDelay} = this.props;\n    if (onMouseOutDelay) {\n      this.hideTimer = setTimeout(this._hidePopover, onMouseOutDelay);\n      return;\n    }\n    this._hidePopover();\n  }\n\n  _addClickEvents() {\n    if (!isBrowser) {\n      return;\n    }\n    document.addEventListener('mousedown', this._handleDocumentClick);\n    document.addEventListener('keyup', this._handleKeyPress);\n  }\n\n  _removeClickEvents() {\n    if (!isBrowser) {\n      return;\n    }\n    document.removeEventListener('mousedown', this._handleDocumentClick);\n    document.removeEventListener('keyup', this._handleKeyPress);\n  }\n\n  _handleDocumentClick = evt => {\n    if (\n      !this.$popper ||\n      nodeHasParent(evt.target, this.$popper) ||\n      nodeHasParent(evt.target, this.$target)\n    ) {\n      return;\n    }\n    this._hidePopover();\n  };\n\n  _togglePopover() {\n    const isVisible = !this.state.isVisible;\n    this.setState({isVisible});\n    if (!isVisible) {\n      this._destroyPopover();\n    }\n  }\n\n  _destroyPopover() {\n    if (this.popper) {\n      this.popper.destroy();\n      delete this.popper;\n    }\n    if (this.props.trigger === TRIGGERS.CLICK) {\n      this._removeClickEvents();\n    }\n  }\n\n  _renderTarget(styleProps) {\n    const {trigger, style} = this.props;\n\n    const interactionProps = {};\n    if (trigger === TRIGGERS.HOVER) {\n      interactionProps.onMouseEnter = this._handleTargetMouseEnter;\n      interactionProps.onMouseLeave = this._handleTargetMouseLeave;\n    } else if (trigger === TRIGGERS.CLICK) {\n      interactionProps.onClick = this._handleTargetClick;\n    }\n\n    return (\n      <PopoverTarget\n        {...interactionProps}\n        userStyle={style.target}\n        {...styleProps}\n        ref={el => {\n          this.$target = el;\n        }}\n      >\n        {this.props.children}\n      </PopoverTarget>\n    );\n  }\n\n  _renderArrow(styleProps) {\n    const {style} = this.props;\n\n    return (\n      <OuterArrow\n        userStyle={style.arrowBorder}\n        {...styleProps}\n        ref={el => {\n          this.$arrow = el;\n        }}\n      >\n        <InnerArrow userStyle={style.arrow} {...styleProps} />\n      </OuterArrow>\n    );\n  }\n\n  _renderBody(styleProps) {\n    const {className, style, trigger} = this.props;\n\n    const interactionProps = {};\n    if (trigger === TRIGGERS.HOVER) {\n      interactionProps.onMouseEnter = this._handlePopoverMouseEnter;\n      interactionProps.onMouseLeave = this._handlePopoverMouseLeave;\n    }\n\n    return (\n      <PopoverBody\n        className={className}\n        {...interactionProps}\n        userStyle={style.body}\n        {...styleProps}\n        ref={el => {\n          this.$popper = el;\n        }}\n      >\n        {this._renderContent(styleProps)}\n        {this._renderArrow(styleProps)}\n      </PopoverBody>\n    );\n  }\n\n  _renderContent(styleProps) {\n    const content =\n      typeof this.props.content === 'function' ? this.props.content() : this.props.content;\n    return (\n      <PopoverContent userStyle={this.props.style.content} {...styleProps}>\n        {content}\n      </PopoverContent>\n    );\n  }\n\n  render() {\n    const {theme, style} = this.props;\n    const {isVisible, popperPlacement, popperStyles, popperOffsets} = this.state;\n\n    const [position] = popperPlacement.split('-');\n    const arrowPosition = position === POSITIONS.AUTO ? POSITIONS.TOP : position;\n\n    const styleProps = {\n      theme,\n      arrowSize: 'arrowSize' in style ? style.arrowSize : DEFAULT_ARROW_SIZE,\n      background: style.background,\n      borderWidth: 'borderWidth' in style ? style.borderWidth : DEFAULT_BORDER_WIDTH,\n      borderColor: style.borderColor,\n      position,\n      arrowPosition,\n      popperStyles,\n      popperOffsets,\n      isActive: isVisible\n    };\n    return (\n      <PopoverComponent userStyle={style.popover} {...styleProps}>\n        {this._renderTarget(styleProps)}\n        {isVisible && this._renderBody(styleProps)}\n      </PopoverComponent>\n    );\n  }\n}\n\nconst ThemedPopover = withTheme(Popover);\n\nObject.assign(ThemedPopover, POSITIONS);\nObject.assign(ThemedPopover, TRIGGERS);\n\nexport default ThemedPopover;\n"],"file":"popover.js"}