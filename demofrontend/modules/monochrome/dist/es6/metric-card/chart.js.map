{"version":3,"sources":["../../../src/metric-card/chart.js"],"names":["React","PureComponent","PropTypes","AutoSizer","XYPlot","AreaSeries","LineSeries","MarkSeries","HorizontalGridLines","VerticalGridLines","XAxis","YAxis","Crosshair","scaleLinear","withTheme","ChartContainer","CrosshairItemTitle","CrosshairItemLegend","CrosshairItemValue","noop","DEFAULT_MARGIN","left","right","top","bottom","Chart","_getScaleSettings","data","dataFilter","xDomain","yDomain","getX","getY0","getY","props","x","Infinity","y","key","values","Array","isArray","length","reduce","acc","d","x0","Math","min","max","y1","y0","Number","isFinite","domain","nice","_getColor","getColor","_renderSeries","highlightSeries","areas","lines","Object","keys","forEach","datums","filter","point","isArea","Type","color","series","onNearestX","bind","onSeriesMouseOver","onSeriesMouseOut","push","concat","_renderCrosshair","highlightValues","theme","style","unit","formatTitle","formatValue","value","crosshairItems","map","i","styleProps","name","displayName","isFirst","isLast","title","crosshairTitle","crosshairLegend","crosshairValue","render","width","height","formatYTick","formatXTick","xTicks","yTicks","horizontalGridLines","verticalGridLines","onMouseEnter","onMouseMove","onMouseLeave","onClick","chart","crosshair","chartWidth","chartHeight","margin","oneOfType","string","number","object","func","array","String"],"mappings":";;AAmBA,OAAOA,KAAP,IAAeC,aAAf,QAAmC,OAAnC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AAEA,OAAOC,MAAP,MAAmB,6BAAnB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;AACA,OAAOC,mBAAP,MAAgC,2CAAhC;AACA,OAAOC,iBAAP,MAA8B,yCAA9B;AACA,OAAOC,KAAP,MAAkB,iCAAlB;AACA,OAAOC,KAAP,MAAkB,iCAAlB;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AAEA,SAAQC,WAAR,QAA0B,UAA1B;AAEA,SAAQC,SAAR,QAAwB,iBAAxB;AACA,SACEC,cADF,EAEEC,kBAFF,EAGEC,mBAHF,EAIEC,kBAJF,QAKO,qBALP;;AAOA,MAAMC,IAAI,GAAG,MAAM,CAAE,CAArB;;AAEA,MAAMC,cAAc,GAAG;AAACC,EAAAA,IAAI,EAAE,EAAP;AAAWC,EAAAA,KAAK,EAAE,EAAlB;AAAsBC,EAAAA,GAAG,EAAE,EAA3B;AAA+BC,EAAAA,MAAM,EAAE;AAAvC,CAAvB;;AAKA,MAAMC,KAAN,SAAoBxB,aAApB,CAAkC;AA4EhCyB,EAAAA,iBAAiB,GAAG;AAClB,UAAM;AAACC,MAAAA,IAAD;AAAOC,MAAAA,UAAP;AAAmBC,MAAAA,OAAnB;AAA4BC,MAAAA,OAA5B;AAAqCC,MAAAA,IAArC;AAA2CC,MAAAA,KAA3C;AAAkDC,MAAAA;AAAlD,QAA0D,KAAKC,KAArE;;AAEA,QAAIL,OAAO,IAAIC,OAAf,EAAwB;AACtB,aAAO;AAACD,QAAAA,OAAD;AAAUC,QAAAA;AAAV,OAAP;AACD;;AAED,QAAIK,CAAC,GAAGN,OAAO,IAAI,CAACO,QAAD,EAAW,CAACA,QAAZ,CAAnB;AACA,QAAIC,CAAC,GAAGP,OAAO,IAAI,CAAC,CAAD,EAAI,CAAJ,CAAnB;;AAEA,SAAK,MAAMQ,GAAX,IAAkBX,IAAlB,EAAwB;AACtB,UAAIC,UAAU,CAACU,GAAD,CAAd,EAAqB;AACnB,cAAMC,MAAM,GAAGZ,IAAI,CAACW,GAAD,CAAnB;;AACA,YAAIE,KAAK,CAACC,OAAN,CAAcF,MAAd,KAAyBA,MAAM,CAACG,MAAP,GAAgB,CAA7C,EAAgD;AAC9CP,UAAAA,CAAC,GACCN,OAAO,IACPU,MAAM,CAACI,MAAP,CAAc,CAACC,GAAD,EAAMC,CAAN,KAAY;AACxB,kBAAMC,EAAE,GAAGf,IAAI,CAACc,CAAD,CAAf;AACAD,YAAAA,GAAG,CAAC,CAAD,CAAH,GAASG,IAAI,CAACC,GAAL,CAASJ,GAAG,CAAC,CAAD,CAAZ,EAAiBE,EAAjB,CAAT;AACAF,YAAAA,GAAG,CAAC,CAAD,CAAH,GAASG,IAAI,CAACE,GAAL,CAASL,GAAG,CAAC,CAAD,CAAZ,EAAiBE,EAAjB,CAAT;AACA,mBAAOF,GAAP;AACD,WALD,EAKGT,CALH,CAFF;AAQAE,UAAAA,CAAC,GACCP,OAAO,IACPS,MAAM,CAACI,MAAP,CAAc,CAACC,GAAD,EAAMC,CAAN,KAAY;AACxB,kBAAMK,EAAE,GAAGjB,IAAI,CAACY,CAAD,CAAf;AACA,kBAAMM,EAAE,GAAGnB,KAAK,CAACa,CAAD,CAAhB;AACAD,YAAAA,GAAG,CAAC,CAAD,CAAH,GAASG,IAAI,CAACC,GAAL,CAASJ,GAAG,CAAC,CAAD,CAAZ,EAAiBM,EAAjB,CAAT;AACAN,YAAAA,GAAG,CAAC,CAAD,CAAH,GAASG,IAAI,CAACE,GAAL,CAASL,GAAG,CAAC,CAAD,CAAZ,EAAiBM,EAAjB,CAAT;;AACA,gBAAIE,MAAM,CAACC,QAAP,CAAgBF,EAAhB,CAAJ,EAAyB;AACvBP,cAAAA,GAAG,CAAC,CAAD,CAAH,GAASG,IAAI,CAACC,GAAL,CAASJ,GAAG,CAAC,CAAD,CAAZ,EAAiBO,EAAjB,CAAT;AACAP,cAAAA,GAAG,CAAC,CAAD,CAAH,GAASG,IAAI,CAACE,GAAL,CAASL,GAAG,CAAC,CAAD,CAAZ,EAAiBO,EAAjB,CAAT;AACD;;AACD,mBAAOP,GAAP;AACD,WAVD,EAUGP,CAVH,CAFF;AAaD;AACF;AACF;;AAED,QAAI,CAACP,OAAL,EAAc;AAEZO,MAAAA,CAAC,GAAGxB,WAAW,GACZyC,MADC,CACMjB,CADN,EAEDkB,IAFC,GAGDD,MAHC,EAAJ;AAID;;AAED,WAAO;AAACzB,MAAAA,OAAO,EAAEM,CAAV;AAAaL,MAAAA,OAAO,EAAEO;AAAtB,KAAP;AACD;;AAGDmB,EAAAA,SAAS,CAAClB,GAAD,EAAM;AACb,UAAM;AAACmB,MAAAA;AAAD,QAAa,KAAKvB,KAAxB;;AAEA,YAAQ,OAAOuB,QAAf;AACE,WAAK,QAAL;AACE,eAAOA,QAAQ,CAACnB,GAAD,CAAf;;AAEF,WAAK,UAAL;AACE,eAAOmB,QAAQ,CAACnB,GAAD,CAAf;;AAEF;AACE,eAAOmB,QAAP;AARJ;AAUD;;AAGDC,EAAAA,aAAa,GAAG;AACd,UAAM;AAAC/B,MAAAA,IAAD;AAAOC,MAAAA,UAAP;AAAmB+B,MAAAA,eAAnB;AAAoC5B,MAAAA,IAApC;AAA0CC,MAAAA,KAA1C;AAAiDC,MAAAA,IAAjD;AAAuDJ,MAAAA;AAAvD,QAAkE,KAAKK,KAA7E;AACA,UAAM0B,KAAK,GAAG,EAAd;AACA,UAAMC,KAAK,GAAG,EAAd;AAEAC,IAAAA,MAAM,CAACC,IAAP,CAAYpC,IAAZ,EAAkBqC,OAAlB,CAA0B1B,GAAG,IAAI;AAC/B,UAAI,CAACV,UAAU,CAACU,GAAD,CAAf,EAAsB;AACpB;AACD;;AAID,YAAM2B,MAAM,GAAGpC,OAAO,GAClBF,IAAI,CAACW,GAAD,CAAJ,CAAU4B,MAAV,CAAiBC,KAAK,IAAI;AACxB,cAAMhC,CAAC,GAAGJ,IAAI,CAACoC,KAAD,CAAd;AACA,eAAOhC,CAAC,IAAIN,OAAO,CAAC,CAAD,CAAZ,IAAmBM,CAAC,IAAIN,OAAO,CAAC,CAAD,CAAtC;AACD,OAHD,CADkB,GAKlBF,IAAI,CAACW,GAAD,CALR;;AAOA,UAAI,CAAC2B,MAAM,CAACvB,MAAZ,EAAoB;AAClB;AACD;;AAED,YAAM0B,MAAM,GAAGhB,MAAM,CAACC,QAAP,CAAgBrB,KAAK,CAACiC,MAAM,CAAC,CAAD,CAAP,CAArB,CAAf;AACA,YAAMI,IAAI,GAAGD,MAAM,GAAG/D,UAAH,GAAgBC,UAAnC;;AACA,YAAMgE,KAAK,GAAG,KAAKd,SAAL,CAAelB,GAAf,CAAd;;AAEA,YAAMiC,MAAM,GACV,oBAAC,IAAD;AACE,QAAA,GAAG,kBAAWjC,GAAX,UADL;AAEE,QAAA,IAAI,EAAE2B,MAFR;AAGE,QAAA,IAAI,EAAElC,IAHR;AAIE,QAAA,IAAI,EAAEE,IAJR;AAKE,QAAA,KAAK,EAAED,KALT;AAME,QAAA,KAAK,EAAEsC,KANT;AAOE,QAAA,IAAI,EAAEA,KAPR;AAQE,QAAA,WAAW,EAAEX,eAAe,KAAKrB,GAApB,GAA0B,CAA1B,GAA8B,CAR7C;AASE,QAAA,UAAU,EAAE,KAAKJ,KAAL,CAAWsC,UAAX,CAAsBC,IAAtB,CAA2B,IAA3B,EAAiCnC,GAAjC,CATd;AAUE,QAAA,iBAAiB,EAAE,MAAM,KAAKJ,KAAL,CAAWwC,iBAAX,CAA6BpC,GAA7B,CAV3B;AAWE,QAAA,gBAAgB,EAAE,MAAM,KAAKJ,KAAL,CAAWyC,gBAAX,CAA4BrC,GAA5B;AAX1B,QADF;;AAgBA,UAAI8B,MAAJ,EAAY;AACVR,QAAAA,KAAK,CAACgB,IAAN,CAAWL,MAAX;AACD,OAFD,MAEO;AACLV,QAAAA,KAAK,CAACe,IAAN,CAAWL,MAAX;AACD;AACF,KA3CD;AA8CA,WAAOX,KAAK,CAACiB,MAAN,CAAahB,KAAb,CAAP;AACD;;AAEDiB,EAAAA,gBAAgB,GAAG;AACjB,UAAM;AAACC,MAAAA;AAAD,QAAoB,KAAK7C,KAA/B;;AAEA,QAAI,CAAC6C,eAAL,EAAsB;AACpB,aAAO,IAAP;AACD;;AAED,UAAM;AACJC,MAAAA,KADI;AAEJC,MAAAA,KAFI;AAGJC,MAAAA,IAHI;AAIJtD,MAAAA,UAJI;AAKJuD,MAAAA,WALI;AAMJC,MAAAA,WANI;AAOJrD,MAAAA,IAPI;AAQJE,MAAAA,IARI;AASJD,MAAAA,KATI;AAUJH,MAAAA;AAVI,QAWF,KAAKK,KAXT;AAYA,UAAM6B,IAAI,GAAGD,MAAM,CAACC,IAAP,CAAYgB,eAAZ,EAA6Bb,MAA7B,CAAoC5B,GAAG,IAAI;AACtD,YAAM+C,KAAK,GAAGN,eAAe,CAACzC,GAAD,CAA7B;AACA,YAAMH,CAAC,GAAGJ,IAAI,CAACsD,KAAD,CAAd;AACA,aAAOzD,UAAU,CAACU,GAAD,CAAV,KAAoB,CAACT,OAAD,IAAaM,CAAC,IAAIN,OAAO,CAAC,CAAD,CAAZ,IAAmBM,CAAC,IAAIN,OAAO,CAAC,CAAD,CAAhE,CAAP;AACD,KAJY,CAAb;AAMA,UAAMyD,cAAc,GAAGvB,IAAI,CAACwB,GAAL,CAAS,CAACjD,GAAD,EAAMkD,CAAN,KAAY;AAC1C,YAAMH,KAAK,GAAGN,eAAe,CAACzC,GAAD,CAA7B;;AACA,YAAMgC,KAAK,GAAG,KAAKd,SAAL,CAAelB,GAAf,CAAd;;AACA,YAAMH,CAAC,GAAGJ,IAAI,CAACsD,KAAD,CAAd;AACA,YAAMhD,CAAC,GAAGJ,IAAI,CAACoD,KAAD,CAAd;AACA,YAAMlC,EAAE,GAAGnB,KAAK,CAACqD,KAAD,CAAhB;AACA,YAAMI,UAAU,GAAG;AACjBT,QAAAA,KADiB;AAEjBU,QAAAA,IAAI,EAAEpD,GAFW;AAGjBqD,QAAAA,WAAW,EAAER,WAAW,CAAC7C,GAAD,CAHP;AAIjBgC,QAAAA,KAJiB;AAKjBsB,QAAAA,OAAO,EAAEJ,CAAC,KAAK,CALE;AAMjBK,QAAAA,MAAM,EAAEL,CAAC,KAAKzB,IAAI,CAACrB,MAAL,GAAc;AANX,OAAnB;AASA,aAAO;AACLP,QAAAA,CADK;AAELE,QAAAA,CAFK;AAGLyD,QAAAA,KAAK,EACH,oBAAC,kBAAD,eAAwBL,UAAxB;AAAoC,UAAA,SAAS,EAAER,KAAK,CAACc;AAArD,YACE,oBAAC,mBAAD,eAAyBN,UAAzB;AAAqC,UAAA,SAAS,EAAER,KAAK,CAACe;AAAtD,WADF,EAEGP,UAAU,CAACE,WAFd,CAJG;AASLN,QAAAA,KAAK,EACH,oBAAC,kBAAD,eAAwBI,UAAxB;AAAoC,UAAA,SAAS,EAAER,KAAK,CAACgB;AAArD,YACG7C,MAAM,CAACC,QAAP,CAAgBF,EAAhB,eAA0BiC,WAAW,CAACjC,EAAD,CAArC,OADH,EAEGiC,WAAW,CAAC/C,CAAD,CAFd,EAGG6C,IAAI,IAAI,kCAAOA,IAAP,CAHX,CAVG;AAgBLZ,QAAAA;AAhBK,OAAP;AAkBD,KAjCsB,CAAvB;AAmCA,WAAO,CACL,oBAAC,SAAD;AACE,MAAA,GAAG,EAAC,WADN;AAEE,MAAA,MAAM,EAAEgB,cAFV;AAGE,MAAA,WAAW,EAAE,MAAM,IAHrB;AAIE,MAAA,WAAW,EAAE/C,MAAM,IAAIA;AAJzB,MADK,EAOL,oBAAC,UAAD;AACE,MAAA,GAAG,EAAC,gBADN;AAEE,MAAA,IAAI,EAAE+C,cAFR;AAGE,MAAA,MAAM,EAAC,MAHT;AAIE,MAAA,WAAW,EAAE,CAJf;AAKE,MAAA,OAAO,EAAEzC,CAAC,IAAIA,CAAC,CAACyB,KALlB;AAME,MAAA,QAAQ,EAAC;AANX,MAPK,CAAP;AAgBD;;AAED4B,EAAAA,MAAM,GAAG;AACP,UAAM;AACJlB,MAAAA,KADI;AAEJmB,MAAAA,KAFI;AAGJC,MAAAA,MAHI;AAIJnB,MAAAA,KAJI;AAKJoB,MAAAA,WALI;AAMJC,MAAAA,WANI;AAOJC,MAAAA,MAPI;AAQJC,MAAAA,MARI;AASJC,MAAAA,mBATI;AAUJC,MAAAA,iBAVI;AAYJC,MAAAA,YAZI;AAaJC,MAAAA,WAbI;AAcJC,MAAAA,YAdI;AAeJC,MAAAA;AAfI,QAgBF,KAAK5E,KAhBT;AAkBA,WACE,oBAAC,cAAD;AACE,MAAA,KAAK,EAAE8C,KADT;AAEE,MAAA,SAAS,EAAEC,KAAK,CAAC8B,KAFnB;AAGE,MAAA,YAAY,EAAE9B,KAAK,CAAC+B,SAHtB;AAIE,MAAA,KAAK,EAAE;AAACb,QAAAA,KAAD;AAAQC,QAAAA;AAAR;AAJT,OAME,oBAAC,SAAD,QACG,CAAC;AAACD,MAAAA,KAAK,EAAEc,UAAR;AAAoBb,MAAAA,MAAM,EAAEc;AAA5B,KAAD,KACC,oBAAC,MAAD;AACE,MAAA,KAAK,EAAED,UADT;AAEE,MAAA,MAAM,EAAEC,WAFV;AAGE,MAAA,MAAM,EAAEjC,KAAK,CAACkC,MAAN,IAAgB/F;AAH1B,OAIM,KAAKM,iBAAL,EAJN;AAKE,MAAA,OAAO,EAAEoF,OALX;AAME,MAAA,YAAY,EAAEH,YANhB;AAOE,MAAA,WAAW,EAAEC,WAPf;AAQE,MAAA,YAAY,EAAEC;AARhB,QAUGN,MAAM,GAAG,CAAT,IAAc,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAC,EAAb;AAAgB,MAAA,UAAU,EAAED,WAA5B;AAAyC,MAAA,SAAS,EAAEC;AAApD,MAVjB,EAYGC,MAAM,GAAG,CAAT,IAAc,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAC,EAAb;AAAgB,MAAA,UAAU,EAAEH,WAA5B;AAAyC,MAAA,SAAS,EAAEG;AAApD,MAZjB,EAcGC,mBAAmB,GAAG,CAAtB,IAA2B,oBAAC,mBAAD;AAAqB,MAAA,SAAS,EAAEA;AAAhC,MAd9B,EAeGC,iBAAiB,GAAG,CAApB,IAAyB,oBAAC,iBAAD;AAAmB,MAAA,SAAS,EAAEA;AAA9B,MAf5B,EAiBG,KAAKhD,aAAL,EAjBH,EAkBG,KAAKoB,gBAAL,EAlBH,CAFJ,CANF,CADF;AAiCD;;AAvU+B;;gBAA5BrD,K,eACe;AACjB0E,EAAAA,KAAK,EAAEjG,SAAS,CAACkH,SAAV,CAAoB,CAAClH,SAAS,CAACmH,MAAX,EAAmBnH,SAAS,CAACoH,MAA7B,CAApB,CADU;AAEjBlB,EAAAA,MAAM,EAAElG,SAAS,CAACkH,SAAV,CAAoB,CAAClH,SAAS,CAACmH,MAAX,EAAmBnH,SAAS,CAACoH,MAA7B,CAApB,CAFS;AAGjBrC,EAAAA,KAAK,EAAE/E,SAAS,CAACqH,MAHA;AAIjBrC,EAAAA,IAAI,EAAEhF,SAAS,CAACmH,MAJC;AAMjB1F,EAAAA,IAAI,EAAEzB,SAAS,CAACqH,MANC;AAOjB3F,EAAAA,UAAU,EAAE1B,SAAS,CAACsH,IAPL;AASjBV,EAAAA,OAAO,EAAE5G,SAAS,CAACsH,IATF;AAUjBb,EAAAA,YAAY,EAAEzG,SAAS,CAACsH,IAVP;AAWjBZ,EAAAA,WAAW,EAAE1G,SAAS,CAACsH,IAXN;AAYjBX,EAAAA,YAAY,EAAE3G,SAAS,CAACsH,IAZP;AAajBhD,EAAAA,UAAU,EAAEtE,SAAS,CAACsH,IAbL;AAcjB9C,EAAAA,iBAAiB,EAAExE,SAAS,CAACsH,IAdZ;AAejB7C,EAAAA,gBAAgB,EAAEzE,SAAS,CAACsH,IAfX;AAiBjBzF,EAAAA,IAAI,EAAE7B,SAAS,CAACsH,IAjBC;AAkBjBxF,EAAAA,KAAK,EAAE9B,SAAS,CAACsH,IAlBA;AAmBjBvF,EAAAA,IAAI,EAAE/B,SAAS,CAACsH,IAnBC;AAoBjB3F,EAAAA,OAAO,EAAE3B,SAAS,CAACuH,KApBF;AAqBjB3F,EAAAA,OAAO,EAAE5B,SAAS,CAACuH,KArBF;AAuBjBlB,EAAAA,MAAM,EAAErG,SAAS,CAACoH,MAvBD;AAwBjBd,EAAAA,MAAM,EAAEtG,SAAS,CAACoH,MAxBD;AAyBjBb,EAAAA,mBAAmB,EAAEvG,SAAS,CAACoH,MAzBd;AA0BjBZ,EAAAA,iBAAiB,EAAExG,SAAS,CAACoH,MA1BZ;AA4BjB3D,EAAAA,eAAe,EAAEzD,SAAS,CAACmH,MA5BV;AA6BjBtC,EAAAA,eAAe,EAAE7E,SAAS,CAACqH,MA7BV;AA+BjBlB,EAAAA,WAAW,EAAEnG,SAAS,CAACsH,IA/BN;AAgCjBrC,EAAAA,WAAW,EAAEjF,SAAS,CAACsH,IAhCN;AAiCjBpC,EAAAA,WAAW,EAAElF,SAAS,CAACsH,IAjCN;AAkCjBlB,EAAAA,WAAW,EAAEpG,SAAS,CAACsH,IAlCN;AAoCjB/D,EAAAA,QAAQ,EAAEvD,SAAS,CAACkH,SAAV,CAAoB,CAAClH,SAAS,CAACqH,MAAX,EAAmBrH,SAAS,CAACmH,MAA7B,EAAqCnH,SAAS,CAACsH,IAA/C,CAApB;AApCO,C;;gBADf/F,K,kBAwCkB;AACpB0E,EAAAA,KAAK,EAAE,MADa;AAEpBC,EAAAA,MAAM,EAAE,GAFY;AAGpBnB,EAAAA,KAAK,EAAE,EAHa;AAIpBtD,EAAAA,IAAI,EAAE,EAJc;AAKpBC,EAAAA,UAAU,EAAEU,GAAG,IAAI,IALC;AAMpB4C,EAAAA,IAAI,EAAE,EANc;AAQpB4B,EAAAA,OAAO,EAAE3F,IARW;AASpBwF,EAAAA,YAAY,EAAExF,IATM;AAUpByF,EAAAA,WAAW,EAAEzF,IAVO;AAWpB0F,EAAAA,YAAY,EAAE1F,IAXM;AAYpBqD,EAAAA,UAAU,EAAErD,IAZQ;AAapBuD,EAAAA,iBAAiB,EAAEvD,IAbC;AAcpBwD,EAAAA,gBAAgB,EAAExD,IAdE;AAgBpBY,EAAAA,IAAI,EAAEc,CAAC,IAAIA,CAAC,CAACV,CAhBO;AAiBpBH,EAAAA,KAAK,EAAEa,CAAC,IAAI,IAjBQ;AAkBpBZ,EAAAA,IAAI,EAAEY,CAAC,IAAIA,CAAC,CAACR,CAlBO;AAqBpBkE,EAAAA,MAAM,EAAE,CArBY;AAsBpBC,EAAAA,MAAM,EAAE,CAtBY;AAuBpBC,EAAAA,mBAAmB,EAAE,CAvBD;AAwBpBC,EAAAA,iBAAiB,EAAE,CAxBC;AA0BpBvB,EAAAA,WAAW,EAAEE,KAAK,IAAIqC,MAAM,CAACrC,KAAD,CA1BR;AA2BpBD,EAAAA,WAAW,EAAEC,KAAK,IAAIqC,MAAM,CAACrC,KAAD,CA3BR;AA6BpBiB,EAAAA,WAAW,EAAEjB,KAAK,IAAIqC,MAAM,CAACrC,KAAD,CA7BR;AA8BpBgB,EAAAA,WAAW,EAAEhB,KAAK,IAAIqC,MAAM,CAACrC,KAAD,CA9BR;AAgCpB5B,EAAAA,QAAQ,EAAE;AAhCU,C;;AAkSxB,eAAe3C,SAAS,CAACW,KAAD,CAAxB","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport AutoSizer from '../shared/autosizer';\n\nimport XYPlot from 'react-vis/dist/plot/xy-plot';\nimport AreaSeries from 'react-vis/dist/plot/series/area-series';\nimport LineSeries from 'react-vis/dist/plot/series/line-series';\nimport MarkSeries from 'react-vis/dist/plot/series/mark-series';\nimport HorizontalGridLines from 'react-vis/dist/plot/horizontal-grid-lines';\nimport VerticalGridLines from 'react-vis/dist/plot/vertical-grid-lines';\nimport XAxis from 'react-vis/dist/plot/axis/x-axis';\nimport YAxis from 'react-vis/dist/plot/axis/y-axis';\nimport Crosshair from 'react-vis/dist/plot/crosshair';\n\nimport {scaleLinear} from 'd3-scale';\n\nimport {withTheme} from '../shared/theme';\nimport {\n  ChartContainer,\n  CrosshairItemTitle,\n  CrosshairItemLegend,\n  CrosshairItemValue\n} from './styled-components';\n\nconst noop = () => {};\n\nconst DEFAULT_MARGIN = {left: 32, right: 20, top: 20, bottom: 32};\n\n/**\n * A metric chart draws a chart with optional percentiles and lags\n */\nclass Chart extends PureComponent {\n  static propTypes = {\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    style: PropTypes.object,\n    unit: PropTypes.string,\n\n    data: PropTypes.object,\n    dataFilter: PropTypes.func,\n\n    onClick: PropTypes.func,\n    onMouseEnter: PropTypes.func,\n    onMouseMove: PropTypes.func,\n    onMouseLeave: PropTypes.func,\n    onNearestX: PropTypes.func,\n    onSeriesMouseOver: PropTypes.func,\n    onSeriesMouseOut: PropTypes.func,\n\n    getX: PropTypes.func,\n    getY0: PropTypes.func,\n    getY: PropTypes.func,\n    xDomain: PropTypes.array,\n    yDomain: PropTypes.array,\n\n    xTicks: PropTypes.number,\n    yTicks: PropTypes.number,\n    horizontalGridLines: PropTypes.number,\n    verticalGridLines: PropTypes.number,\n\n    highlightSeries: PropTypes.string,\n    highlightValues: PropTypes.object,\n\n    formatYTick: PropTypes.func,\n    formatTitle: PropTypes.func,\n    formatValue: PropTypes.func,\n    formatXTick: PropTypes.func,\n\n    getColor: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func])\n  };\n\n  static defaultProps = {\n    width: '100%',\n    height: 300,\n    style: {},\n    data: {},\n    dataFilter: key => true,\n    unit: '',\n\n    onClick: noop,\n    onMouseEnter: noop,\n    onMouseMove: noop,\n    onMouseLeave: noop,\n    onNearestX: noop,\n    onSeriesMouseOver: noop,\n    onSeriesMouseOut: noop,\n\n    getX: d => d.x,\n    getY0: d => null,\n    getY: d => d.y,\n\n    // Backward compatibility\n    xTicks: 4,\n    yTicks: 4,\n    horizontalGridLines: 4,\n    verticalGridLines: 4,\n\n    formatTitle: value => String(value),\n    formatValue: value => String(value),\n\n    formatXTick: value => String(value),\n    formatYTick: value => String(value),\n\n    getColor: '#000'\n  };\n\n  /* eslint-disable max-depth, complexity */\n  _getScaleSettings() {\n    const {data, dataFilter, xDomain, yDomain, getX, getY0, getY} = this.props;\n\n    if (xDomain && yDomain) {\n      return {xDomain, yDomain};\n    }\n\n    let x = xDomain || [Infinity, -Infinity];\n    let y = yDomain || [0, 0];\n\n    for (const key in data) {\n      if (dataFilter(key)) {\n        const values = data[key];\n        if (Array.isArray(values) && values.length > 0) {\n          x =\n            xDomain ||\n            values.reduce((acc, d) => {\n              const x0 = getX(d);\n              acc[0] = Math.min(acc[0], x0);\n              acc[1] = Math.max(acc[1], x0);\n              return acc;\n            }, x);\n          y =\n            yDomain ||\n            values.reduce((acc, d) => {\n              const y1 = getY(d);\n              const y0 = getY0(d);\n              acc[0] = Math.min(acc[0], y1);\n              acc[1] = Math.max(acc[1], y1);\n              if (Number.isFinite(y0)) {\n                acc[0] = Math.min(acc[0], y0);\n                acc[1] = Math.max(acc[1], y0);\n              }\n              return acc;\n            }, y);\n        }\n      }\n    }\n\n    if (!yDomain) {\n      // Snap the bounds to nice round numbers\n      y = scaleLinear()\n        .domain(y)\n        .nice()\n        .domain();\n    }\n\n    return {xDomain: x, yDomain: y};\n  }\n  /* eslint-enable max-depth, complexity */\n\n  _getColor(key) {\n    const {getColor} = this.props;\n\n    switch (typeof getColor) {\n      case 'object':\n        return getColor[key];\n\n      case 'function':\n        return getColor(key);\n\n      default:\n        return getColor;\n    }\n  }\n\n  // Populate series\n  _renderSeries() {\n    const {data, dataFilter, highlightSeries, getX, getY0, getY, xDomain} = this.props;\n    const areas = [];\n    const lines = [];\n\n    Object.keys(data).forEach(key => {\n      if (!dataFilter(key)) {\n        return;\n      }\n\n      // Temporary patch until vis-gl fixes issue with rendering data outside of domain\n      // https://github.com/uber/react-vis/issues/627\n      const datums = xDomain\n        ? data[key].filter(point => {\n            const x = getX(point);\n            return x >= xDomain[0] && x <= xDomain[1];\n          })\n        : data[key];\n\n      if (!datums.length) {\n        return;\n      }\n\n      const isArea = Number.isFinite(getY0(datums[0]));\n      const Type = isArea ? AreaSeries : LineSeries;\n      const color = this._getColor(key);\n\n      const series = (\n        <Type\n          key={`value-${key}-line`}\n          data={datums}\n          getX={getX}\n          getY={getY}\n          getY0={getY0}\n          color={color}\n          fill={color}\n          strokeWidth={highlightSeries === key ? 4 : 2}\n          onNearestX={this.props.onNearestX.bind(this, key)}\n          onSeriesMouseOver={() => this.props.onSeriesMouseOver(key)}\n          onSeriesMouseOut={() => this.props.onSeriesMouseOut(key)}\n        />\n      );\n\n      if (isArea) {\n        areas.push(series);\n      } else {\n        lines.push(series);\n      }\n    });\n\n    // Render lines on top\n    return areas.concat(lines);\n  }\n\n  _renderCrosshair() {\n    const {highlightValues} = this.props;\n\n    if (!highlightValues) {\n      return null;\n    }\n\n    const {\n      theme,\n      style,\n      unit,\n      dataFilter,\n      formatTitle,\n      formatValue,\n      getX,\n      getY,\n      getY0,\n      xDomain\n    } = this.props;\n    const keys = Object.keys(highlightValues).filter(key => {\n      const value = highlightValues[key];\n      const x = getX(value);\n      return dataFilter(key) && (!xDomain || (x >= xDomain[0] && x <= xDomain[1]));\n    });\n\n    const crosshairItems = keys.map((key, i) => {\n      const value = highlightValues[key];\n      const color = this._getColor(key);\n      const x = getX(value);\n      const y = getY(value);\n      const y0 = getY0(value);\n      const styleProps = {\n        theme,\n        name: key,\n        displayName: formatTitle(key),\n        color,\n        isFirst: i === 0,\n        isLast: i === keys.length - 1\n      };\n\n      return {\n        x,\n        y,\n        title: (\n          <CrosshairItemTitle {...styleProps} userStyle={style.crosshairTitle}>\n            <CrosshairItemLegend {...styleProps} userStyle={style.crosshairLegend} />\n            {styleProps.displayName}\n          </CrosshairItemTitle>\n        ),\n        value: (\n          <CrosshairItemValue {...styleProps} userStyle={style.crosshairValue}>\n            {Number.isFinite(y0) && `${formatValue(y0)}, `}\n            {formatValue(y)}\n            {unit && <span>{unit}</span>}\n          </CrosshairItemValue>\n        ),\n        color\n      };\n    });\n\n    return [\n      <Crosshair\n        key=\"crosshair\"\n        values={crosshairItems}\n        titleFormat={() => null}\n        itemsFormat={values => values}\n      />,\n      <MarkSeries\n        key=\"hovered-values\"\n        data={crosshairItems}\n        stroke=\"#fff\"\n        strokeWidth={2}\n        getFill={d => d.color}\n        fillType=\"literal\"\n      />\n    ];\n  }\n\n  render() {\n    const {\n      theme,\n      width,\n      height,\n      style,\n      formatYTick,\n      formatXTick,\n      xTicks,\n      yTicks,\n      horizontalGridLines,\n      verticalGridLines,\n\n      onMouseEnter,\n      onMouseMove,\n      onMouseLeave,\n      onClick\n    } = this.props;\n\n    return (\n      <ChartContainer\n        theme={theme}\n        userStyle={style.chart}\n        tooltipStyle={style.crosshair}\n        style={{width, height}}\n      >\n        <AutoSizer>\n          {({width: chartWidth, height: chartHeight}) => (\n            <XYPlot\n              width={chartWidth}\n              height={chartHeight}\n              margin={style.margin || DEFAULT_MARGIN}\n              {...this._getScaleSettings()}\n              onClick={onClick}\n              onMouseEnter={onMouseEnter}\n              onMouseMove={onMouseMove}\n              onMouseLeave={onMouseLeave}\n            >\n              {xTicks > 0 && <XAxis title=\"\" tickFormat={formatXTick} tickTotal={xTicks} />}\n\n              {yTicks > 0 && <YAxis title=\"\" tickFormat={formatYTick} tickTotal={yTicks} />}\n\n              {horizontalGridLines > 0 && <HorizontalGridLines tickTotal={horizontalGridLines} />}\n              {verticalGridLines > 0 && <VerticalGridLines tickTotal={verticalGridLines} />}\n\n              {this._renderSeries()}\n              {this._renderCrosshair()}\n            </XYPlot>\n          )}\n        </AutoSizer>\n      </ChartContainer>\n    );\n  }\n}\n\nexport default withTheme(Chart);\n"],"file":"chart.js"}