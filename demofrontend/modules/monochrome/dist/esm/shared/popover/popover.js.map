{"version":3,"sources":["../../../../src/shared/popover/popover.js"],"names":["React","PropTypes","Popper","styled","withTheme","evaluateStyle","capitalize","getOppositePosition","generateTriangleStyles","nodeHasParent","positionsToPopperPlacement","isBrowser","document","Boolean","createElement","POSITIONS","TOP","RIGHT","BOTTOM","LEFT","AUTO","TRIGGERS","CLICK","HOVER","DEFAULT_ARROW_SIZE","DEFAULT_BORDER_WIDTH","PopoverComponent","div","props","display","userStyle","PopoverTarget","PopoverContent","PopoverBody","style","position","arrowSize","theme","__reset__","top","left","zIndex","background","borderStyle","borderWidth","borderColor","controlColorPrimary","boxShadow","shadow","fontFamily","fontSize","fontWeight","popperStyles","OuterArrow","popperOffsets","arrowOffsets","arrow","Object","assign","InnerArrow","isVertical","marginTop","marginLeft","POSITIONS_PROP_TYPE","oneOf","Popover","_togglePopover","clearTimeout","hideTimer","_showPopover","_hidePopoverWithDelay","evt","key","_hidePopover","data","setState","offsets","popperPlacement","placement","styles","_getDefaultState","_destroyPopover","$popper","target","$target","state","prevProps","prevState","isVisible","PopperClass","popperClass","popper","modifiers","element","$arrow","enabled","applyStyle","applyReactStyle","fn","_handlePopperUpdate","order","trigger","_addClickEvents","_removeClickEvents","arrowPosition","onMouseOutDelay","setTimeout","addEventListener","_handleDocumentClick","_handleKeyPress","removeEventListener","destroy","styleProps","interactionProps","onMouseEnter","_handleTargetMouseEnter","onMouseLeave","_handleTargetMouseLeave","onClick","_handleTargetClick","el","children","arrowBorder","className","_handlePopoverMouseEnter","_handlePopoverMouseLeave","body","_renderContent","_renderArrow","content","split","isActive","popover","_renderTarget","_renderBody","Component","string","object","oneOfType","node","func","isRequired","number","ThemedPopover"],"mappings":";;;;;;;;;;;;;;;;;;AAoBA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAAQC,SAAR,EAAmBC,aAAnB,QAAuC,UAAvC;AAEA,SACEC,UADF,EAEEC,mBAFF,EAGEC,sBAHF,EAIEC,aAJF,EAKEC,0BALF,QAMO,SANP;AAQA,IAAMC,SAAS,GAAG,OAAOC,QAAP,KAAoB,WAApB,IAAmCC,OAAO,CAACD,QAAQ,CAACE,aAAV,CAA5D;AAEA,OAAO,IAAMC,SAAS,GAAG;AACvBC,EAAAA,GAAG,EAAE,KADkB;AAEvBC,EAAAA,KAAK,EAAE,OAFgB;AAGvBC,EAAAA,MAAM,EAAE,QAHe;AAIvBC,EAAAA,IAAI,EAAE,MAJiB;AAKvBC,EAAAA,IAAI,EAAE;AALiB,CAAlB;AAQP,OAAO,IAAMC,QAAQ,GAAG;AACtBC,EAAAA,KAAK,EAAE,OADe;AAEtBC,EAAAA,KAAK,EAAE;AAFe,CAAjB;AAKP,IAAMC,kBAAkB,GAAG,CAA3B;AACA,IAAMC,oBAAoB,GAAG,CAA7B;AAEA,IAAMC,gBAAgB,GAAGvB,MAAM,CAACwB,GAAP,CAAW,UAAAC,KAAK;AAAA;AAIvCC,IAAAA,OAAO,EAAE;AAJ8B,KAKpCxB,aAAa,CAACuB,KAAK,CAACE,SAAP,EAAkBF,KAAlB,CALuB;AAAA,CAAhB,CAAzB;AAQA,IAAMG,aAAa,GAAG5B,MAAM,CAACwB,GAAP,CAAW,UAAAC,KAAK;AAAA,2BACjCvB,aAAa,CAACuB,KAAK,CAACE,SAAP,EAAkBF,KAAlB,CADoB;AAAA,CAAhB,CAAtB;AAIA,IAAMI,cAAc,GAAG7B,MAAM,CAACwB,GAAP,CAAW,UAAAC,KAAK;AAAA,2BAClCvB,aAAa,CAACuB,KAAK,CAACE,SAAP,EAAkBF,KAAlB,CADqB;AAAA,CAAhB,CAAvB;AAIA,IAAMK,WAAW,GAAG9B,MAAM,CAACwB,GAAP,CAAW,UAAAC,KAAK,EAAI;AACtC,MAAIM,KAAK,GAAG,IAAZ;;AACA,MAAIN,KAAK,CAACO,QAAN,IAAkBP,KAAK,CAACO,QAAN,KAAmBpB,SAAS,CAACK,IAA/C,IAAuDQ,KAAK,CAACQ,SAAjE,EAA4E;AAC1EF,IAAAA,KAAK,uCACO5B,UAAU,CAACC,mBAAmB,CAACqB,KAAK,CAACO,QAAP,CAApB,CADjB,GAC2DP,KAAK,CAACQ,SADjE,CAAL;AAGD;;AAED,qEACKR,KAAK,CAACS,KAAN,CAAYC,SADjB,GAEKJ,KAFL;AAIEC,IAAAA,QAAQ,EAAE,UAJZ;AAKEI,IAAAA,GAAG,EAAE,CALP;AAMEC,IAAAA,IAAI,EAAE,CANR;AAOEC,IAAAA,MAAM,EAAE,EAPV;AAQEC,IAAAA,UAAU,EAAEd,KAAK,CAACc,UAAN,IAAoBd,KAAK,CAACS,KAAN,CAAYK,UAR9C;AASEC,IAAAA,WAAW,EAAE,OATf;AAUEC,IAAAA,WAAW,EAAEhB,KAAK,CAACgB,WAVrB;AAWEC,IAAAA,WAAW,EAAEjB,KAAK,CAACiB,WAAN,IAAqBjB,KAAK,CAACS,KAAN,CAAYS,mBAXhD;AAYEC,IAAAA,SAAS,EAAEnB,KAAK,CAACS,KAAN,CAAYW,MAZzB;AAcEC,IAAAA,UAAU,EAAErB,KAAK,CAACS,KAAN,CAAYY,UAd1B;AAeEC,IAAAA,QAAQ,EAAEtB,KAAK,CAACS,KAAN,CAAYa,QAfxB;AAgBEC,IAAAA,UAAU,EAAE;AAhBd,KAkBKvB,KAAK,CAACwB,YAlBX,GAmBK/C,aAAa,CAACuB,KAAK,CAACE,SAAP,EAAkBF,KAAlB,CAnBlB;AAqBD,CA7BmB,CAApB;AA+BA,IAAMyB,UAAU,GAAGlD,MAAM,CAACwB,GAAP,CAAW,UAAAC,KAAK,EAAI;AAAA,MAQ9BO,QAR8B,GAQQP,KARR,CAQ9BO,QAR8B;AAAA,MAQpBC,SARoB,GAQQR,KARR,CAQpBQ,SARoB;AAAA,MAQTkB,aARS,GAQQ1B,KARR,CAQT0B,aARS;;AAUrC,MAAI,CAAClB,SAAL,EAAgB;AACd,WAAO,IAAP;AACD;;AAED,MAAMmB,YAAY,GAAGD,aAAa,CAACE,KAAd,IAAuB,EAA5C;;AAEA,MAAMtB,KAAK;AACTW,IAAAA,WAAW,EAAEjB,KAAK,CAACiB,WAAN,IAAqBjB,KAAK,CAACS,KAAN,CAAYS;AADrC,KAIRvC,mBAAmB,CAAC4B,QAAD,CAJX,EAIwB,CAACC,SAJzB,CAAX;;AAQA,MAAImB,YAAY,CAAChB,GAAjB,EAAsB;AACpBL,IAAAA,KAAK,CAACK,GAAN,GAAYgB,YAAY,CAAChB,GAAzB;AACD;;AACD,MAAIgB,YAAY,CAACf,IAAjB,EAAuB;AACrBN,IAAAA,KAAK,CAACM,IAAN,GAAae,YAAY,CAACf,IAA1B;AACD;;AAED,SAAOiB,MAAM,CAACC,MAAP,CACLxB,KADK,EAEL7B,aAAa,CAACuB,KAAK,CAACE,SAAP,EAAkBF,KAAlB,CAFR,EAGLpB,sBAAsB,CAAC2B,QAAD,EAAWC,SAAX,CAHjB,CAAP;AAKD,CApCkB,CAAnB;AAsCA,IAAMuB,UAAU,GAAGxD,MAAM,CAACwB,GAAP,CAAW,UAAAC,KAAK,EAAI;AAAA,MAC9BO,QAD8B,GACPP,KADO,CAC9BO,QAD8B;AAAA,MACpBC,SADoB,GACPR,KADO,CACpBQ,SADoB;;AAGrC,MAAI,CAACA,SAAL,EAAgB;AACd,WAAO,IAAP;AACD;;AAED,MAAMwB,UAAU,GAAGzB,QAAQ,KAAKpB,SAAS,CAACC,GAAvB,IAA8BmB,QAAQ,KAAKpB,SAAS,CAACG,MAAxE;AAEA,MAAMgB,KAAK,GAAG;AACZW,IAAAA,WAAW,EAAEjB,KAAK,CAACc,UAAN,IAAoBd,KAAK,CAACS,KAAN,CAAYK;AADjC,GAAd;;AAKA,MAAIkB,UAAJ,EAAgB;AACd1B,IAAAA,KAAK,CAACM,IAAN,GAAa,CAACJ,SAAd;AACAF,IAAAA,KAAK,CAACK,GAAN,GAAYJ,QAAQ,KAAKpB,SAAS,CAACC,GAAvB,GAA6B,CAACoB,SAA9B,GAA0C,CAAtD;AACAF,IAAAA,KAAK,CAAC2B,SAAN,GAAkB,CAAC1B,QAAQ,KAAKpB,SAAS,CAACC,GAAvB,GAA6B,CAAC,CAA9B,GAAkC,CAAnC,IAAwCY,KAAK,CAACgB,WAAhE;AACD,GAJD,MAIO;AACLV,IAAAA,KAAK,CAACK,GAAN,GAAY,CAACH,SAAb;AACAF,IAAAA,KAAK,CAACM,IAAN,GAAaL,QAAQ,KAAKpB,SAAS,CAACI,IAAvB,GAA8B,CAACiB,SAA/B,GAA2C,CAAxD;AACAF,IAAAA,KAAK,CAAC4B,UAAN,GAAmB,CAAC3B,QAAQ,KAAKpB,SAAS,CAACI,IAAvB,GAA8B,CAAC,CAA/B,GAAmC,CAApC,IAAyCS,KAAK,CAACgB,WAAlE;AACD;;AAED,SAAOa,MAAM,CAACC,MAAP,CACLxB,KADK,EAEL7B,aAAa,CAACuB,KAAK,CAACE,SAAP,EAAkBF,KAAlB,CAFR,EAGLpB,sBAAsB,CAAC2B,QAAD,EAAWC,SAAX,CAHjB,CAAP;AAKD,CA7BkB,CAAnB;AA+BA,IAAM2B,mBAAmB,GAAG9D,SAAS,CAAC+D,KAAV,CAAgB,CAC1CjD,SAAS,CAACC,GADgC,EAE1CD,SAAS,CAACE,KAFgC,EAG1CF,SAAS,CAACG,MAHgC,EAI1CH,SAAS,CAACI,IAJgC,EAK1CJ,SAAS,CAACK,IALgC,CAAhB,CAA5B;;IAQM6C,O;;;;;AAuBJ,mBAAYrC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,yEA+CE,YAAM;AACzB,YAAKsC,cAAL;AACD,KAjDkB;;AAAA,8EAmDO,YAAM;AAG9BC,MAAAA,YAAY,CAAC,MAAKC,SAAN,CAAZ;;AAEA,YAAKC,YAAL;AACD,KAzDkB;;AAAA,8EA2DO,YAAM;AAC9B,YAAKC,qBAAL;AACD,KA7DkB;;AAAA,+EA+DQ,YAAM;AAC/BH,MAAAA,YAAY,CAAC,MAAKC,SAAN,CAAZ;AACD,KAjEkB;;AAAA,+EAmEQ,YAAM;AAC/B,YAAKE,qBAAL;AACD,KArEkB;;AAAA,sEAuED,UAAAC,GAAG,EAAI;AACvB,UAAIA,GAAG,CAACC,GAAJ,KAAY,QAAhB,EAA0B;AACxB,cAAKC,YAAL;AACD;AACF,KA3EkB;;AAAA,0EA6EG,UAAAC,IAAI,EAAI;AAC5B,YAAKC,QAAL,CAAc;AACZrB,QAAAA,aAAa,EAAEoB,IAAI,CAACE,OADR;AAEZC,QAAAA,eAAe,EAAEH,IAAI,CAACI,SAFV;AAGZ1B,QAAAA,YAAY,EAAEsB,IAAI,CAACK;AAHP,OAAd;;AAKA,aAAOL,IAAP;AACD,KApFkB;;AAAA,mEA0FJ,YAAM;AACnB,YAAKC,QAAL,CAAc,MAAKK,gBAAL,CAAsB,MAAKpD,KAA3B,CAAd;;AACA,YAAKqD,eAAL;AACD,KA7FkB;;AAAA,2EAwHI,UAAAV,GAAG,EAAI;AAC5B,UACE,CAAC,MAAKW,OAAN,IACAzE,aAAa,CAAC8D,GAAG,CAACY,MAAL,EAAa,MAAKD,OAAlB,CADb,IAEAzE,aAAa,CAAC8D,GAAG,CAACY,MAAL,EAAa,MAAKC,OAAlB,CAHf,EAIE;AACA;AACD;;AACD,YAAKX,YAAL;AACD,KAjIkB;;AAEjB,UAAKY,KAAL,GAAa,MAAKL,gBAAL,CAAsBpD,KAAtB,CAAb;AAFiB;AAGlB;;;;uCAEkB0D,S,EAAWC,S,EAAW;AAEvC,UAAI,KAAKF,KAAL,CAAWG,SAAX,IAAwB,CAACD,SAAS,CAACC,SAAvC,EAAkD;AAChD,YAAMC,WAAW,GAAG,KAAK7D,KAAL,CAAW8D,WAA/B;AACA,aAAKC,MAAL,GAAc,IAAIF,WAAJ,CAAgB,KAAKL,OAArB,EAA8B,KAAKF,OAAnC,EAA4C;AACxDJ,UAAAA,SAAS,EAAE,KAAKO,KAAL,CAAWR,eADkC;AAExDe,UAAAA,SAAS,EAAE;AAETpC,YAAAA,KAAK,EAAE;AACLqC,cAAAA,OAAO,EAAE,KAAKC,MADT;AAELC,cAAAA,OAAO,EAAE;AAFJ,aAFE;AAOTC,YAAAA,UAAU,EAAE;AAACD,cAAAA,OAAO,EAAE;AAAV,aAPH;AAQTE,YAAAA,eAAe,EAAE;AACfF,cAAAA,OAAO,EAAE,IADM;AAEfG,cAAAA,EAAE,EAAE,KAAKC,mBAFM;AAGfC,cAAAA,KAAK,EAAE;AAHQ;AARR;AAF6C,SAA5C,CAAd;;AAkBA,YAAI,KAAKxE,KAAL,CAAWyE,OAAX,KAAuBhF,QAAQ,CAACC,KAApC,EAA2C;AACzC,eAAKgF,eAAL;AACD;AACF;AACF;;;2CAEsB;AACrB,WAAKrB,eAAL;;AACA,WAAKsB,kBAAL;AACD;;;qCAEgB3E,K,EAAO;AACtB,aAAO;AACL4D,QAAAA,SAAS,EAAE,KADN;AAELlC,QAAAA,aAAa,EAAE,EAFV;AAGLuB,QAAAA,eAAe,EAAEnE,0BAA0B,CAACkB,KAAK,CAACO,QAAP,EAAiBP,KAAK,CAAC4E,aAAvB,CAHtC;AAILpD,QAAAA,YAAY,EAAE;AAJT,OAAP;AAMD;;;mCAyCc;AACb,WAAKuB,QAAL,CAAc;AAACa,QAAAA,SAAS,EAAE;AAAZ,OAAd;AACD;;;4CAOuB;AAAA,UACfiB,eADe,GACI,KAAK7E,KADT,CACf6E,eADe;;AAEtB,UAAIA,eAAJ,EAAqB;AACnB,aAAKrC,SAAL,GAAiBsC,UAAU,CAAC,KAAKjC,YAAN,EAAoBgC,eAApB,CAA3B;AACA;AACD;;AACD,WAAKhC,YAAL;AACD;;;sCAEiB;AAChB,UAAI,CAAC9D,SAAL,EAAgB;AACd;AACD;;AACDC,MAAAA,QAAQ,CAAC+F,gBAAT,CAA0B,WAA1B,EAAuC,KAAKC,oBAA5C;AACAhG,MAAAA,QAAQ,CAAC+F,gBAAT,CAA0B,OAA1B,EAAmC,KAAKE,eAAxC;AACD;;;yCAEoB;AACnB,UAAI,CAAClG,SAAL,EAAgB;AACd;AACD;;AACDC,MAAAA,QAAQ,CAACkG,mBAAT,CAA6B,WAA7B,EAA0C,KAAKF,oBAA/C;AACAhG,MAAAA,QAAQ,CAACkG,mBAAT,CAA6B,OAA7B,EAAsC,KAAKD,eAA3C;AACD;;;qCAagB;AACf,UAAMrB,SAAS,GAAG,CAAC,KAAKH,KAAL,CAAWG,SAA9B;AACA,WAAKb,QAAL,CAAc;AAACa,QAAAA,SAAS,EAATA;AAAD,OAAd;;AACA,UAAI,CAACA,SAAL,EAAgB;AACd,aAAKP,eAAL;AACD;AACF;;;sCAEiB;AAChB,UAAI,KAAKU,MAAT,EAAiB;AACf,aAAKA,MAAL,CAAYoB,OAAZ;AACA,eAAO,KAAKpB,MAAZ;AACD;;AACD,UAAI,KAAK/D,KAAL,CAAWyE,OAAX,KAAuBhF,QAAQ,CAACC,KAApC,EAA2C;AACzC,aAAKiF,kBAAL;AACD;AACF;;;kCAEaS,U,EAAY;AAAA;;AAAA,wBACC,KAAKpF,KADN;AAAA,UACjByE,OADiB,eACjBA,OADiB;AAAA,UACRnE,KADQ,eACRA,KADQ;AAGxB,UAAM+E,gBAAgB,GAAG,EAAzB;;AACA,UAAIZ,OAAO,KAAKhF,QAAQ,CAACE,KAAzB,EAAgC;AAC9B0F,QAAAA,gBAAgB,CAACC,YAAjB,GAAgC,KAAKC,uBAArC;AACAF,QAAAA,gBAAgB,CAACG,YAAjB,GAAgC,KAAKC,uBAArC;AACD,OAHD,MAGO,IAAIhB,OAAO,KAAKhF,QAAQ,CAACC,KAAzB,EAAgC;AACrC2F,QAAAA,gBAAgB,CAACK,OAAjB,GAA2B,KAAKC,kBAAhC;AACD;;AAED,aACE,oBAAC,aAAD,eACMN,gBADN;AAEE,QAAA,SAAS,EAAE/E,KAAK,CAACiD;AAFnB,SAGM6B,UAHN;AAIE,QAAA,GAAG,EAAE,aAAAQ,EAAE,EAAI;AACT,UAAA,MAAI,CAACpC,OAAL,GAAeoC,EAAf;AACD;AANH,UAQG,KAAK5F,KAAL,CAAW6F,QARd,CADF;AAYD;;;iCAEYT,U,EAAY;AAAA;;AAAA,UAChB9E,KADgB,GACP,KAAKN,KADE,CAChBM,KADgB;AAGvB,aACE,oBAAC,UAAD;AACE,QAAA,SAAS,EAAEA,KAAK,CAACwF;AADnB,SAEMV,UAFN;AAGE,QAAA,GAAG,EAAE,aAAAQ,EAAE,EAAI;AACT,UAAA,MAAI,CAAC1B,MAAL,GAAc0B,EAAd;AACD;AALH,UAOE,oBAAC,UAAD;AAAY,QAAA,SAAS,EAAEtF,KAAK,CAACsB;AAA7B,SAAwCwD,UAAxC,EAPF,CADF;AAWD;;;gCAEWA,U,EAAY;AAAA;;AAAA,yBACc,KAAKpF,KADnB;AAAA,UACf+F,SADe,gBACfA,SADe;AAAA,UACJzF,KADI,gBACJA,KADI;AAAA,UACGmE,OADH,gBACGA,OADH;AAGtB,UAAMY,gBAAgB,GAAG,EAAzB;;AACA,UAAIZ,OAAO,KAAKhF,QAAQ,CAACE,KAAzB,EAAgC;AAC9B0F,QAAAA,gBAAgB,CAACC,YAAjB,GAAgC,KAAKU,wBAArC;AACAX,QAAAA,gBAAgB,CAACG,YAAjB,GAAgC,KAAKS,wBAArC;AACD;;AAED,aACE,oBAAC,WAAD;AACE,QAAA,SAAS,EAAEF;AADb,SAEMV,gBAFN;AAGE,QAAA,SAAS,EAAE/E,KAAK,CAAC4F;AAHnB,SAIMd,UAJN;AAKE,QAAA,GAAG,EAAE,aAAAQ,EAAE,EAAI;AACT,UAAA,MAAI,CAACtC,OAAL,GAAesC,EAAf;AACD;AAPH,UASG,KAAKO,cAAL,CAAoBf,UAApB,CATH,EAUG,KAAKgB,YAAL,CAAkBhB,UAAlB,CAVH,CADF;AAcD;;;mCAEcA,U,EAAY;AACzB,UAAMiB,OAAO,GACX,OAAO,KAAKrG,KAAL,CAAWqG,OAAlB,KAA8B,UAA9B,GAA2C,KAAKrG,KAAL,CAAWqG,OAAX,EAA3C,GAAkE,KAAKrG,KAAL,CAAWqG,OAD/E;AAEA,aACE,oBAAC,cAAD;AAAgB,QAAA,SAAS,EAAE,KAAKrG,KAAL,CAAWM,KAAX,CAAiB+F;AAA5C,SAAyDjB,UAAzD,GACGiB,OADH,CADF;AAKD;;;6BAEQ;AAAA,yBACgB,KAAKrG,KADrB;AAAA,UACAS,KADA,gBACAA,KADA;AAAA,UACOH,KADP,gBACOA,KADP;AAAA,wBAE2D,KAAKmD,KAFhE;AAAA,UAEAG,SAFA,eAEAA,SAFA;AAAA,UAEWX,eAFX,eAEWA,eAFX;AAAA,UAE4BzB,YAF5B,eAE4BA,YAF5B;AAAA,UAE0CE,aAF1C,eAE0CA,aAF1C;;AAAA,kCAIYuB,eAAe,CAACqD,KAAhB,CAAsB,GAAtB,CAJZ;AAAA;AAAA,UAIA/F,QAJA;;AAKP,UAAMqE,aAAa,GAAGrE,QAAQ,KAAKpB,SAAS,CAACK,IAAvB,GAA8BL,SAAS,CAACC,GAAxC,GAA8CmB,QAApE;AAEA,UAAM6E,UAAU,GAAG;AACjB3E,QAAAA,KAAK,EAALA,KADiB;AAEjBD,QAAAA,SAAS,EAAE,eAAeF,KAAf,GAAuBA,KAAK,CAACE,SAA7B,GAAyCZ,kBAFnC;AAGjBkB,QAAAA,UAAU,EAAER,KAAK,CAACQ,UAHD;AAIjBE,QAAAA,WAAW,EAAE,iBAAiBV,KAAjB,GAAyBA,KAAK,CAACU,WAA/B,GAA6CnB,oBAJzC;AAKjBoB,QAAAA,WAAW,EAAEX,KAAK,CAACW,WALF;AAMjBV,QAAAA,QAAQ,EAARA,QANiB;AAOjBqE,QAAAA,aAAa,EAAbA,aAPiB;AAQjBpD,QAAAA,YAAY,EAAZA,YARiB;AASjBE,QAAAA,aAAa,EAAbA,aATiB;AAUjB6E,QAAAA,QAAQ,EAAE3C;AAVO,OAAnB;AAYA,aACE,oBAAC,gBAAD;AAAkB,QAAA,SAAS,EAAEtD,KAAK,CAACkG;AAAnC,SAAgDpB,UAAhD,GACG,KAAKqB,aAAL,CAAmBrB,UAAnB,CADH,EAEGxB,SAAS,IAAI,KAAK8C,WAAL,CAAiBtB,UAAjB,CAFhB,CADF;AAMD;;;;EAjRmBhH,KAAK,CAACuI,S;;gBAAtBtE,O,eACe;AACjB0D,EAAAA,SAAS,EAAE1H,SAAS,CAACuI,MADJ;AAEjBtG,EAAAA,KAAK,EAAEjC,SAAS,CAACwI,MAFA;AAGjBR,EAAAA,OAAO,EAAEhI,SAAS,CAACyI,SAAV,CAAoB,CAACzI,SAAS,CAAC0I,IAAX,EAAiB1I,SAAS,CAAC2I,IAA3B,CAApB,EAAsDC,UAH9C;AAIjB1G,EAAAA,QAAQ,EAAE4B,mBAJO;AAMjByC,EAAAA,aAAa,EAAEzC,mBANE;AAQjB0C,EAAAA,eAAe,EAAExG,SAAS,CAAC6I,MARV;AASjBzC,EAAAA,OAAO,EAAEpG,SAAS,CAAC+D,KAAV,CAAgB,CAAC3C,QAAQ,CAACE,KAAV,EAAiBF,QAAQ,CAACC,KAA1B,CAAhB,CATQ;AAWjBoE,EAAAA,WAAW,EAAEzF,SAAS,CAAC2I;AAXN,C;;gBADf3E,O,kBAekB;AACpB0D,EAAAA,SAAS,EAAE,EADS;AAEpBzF,EAAAA,KAAK,EAAE,EAFa;AAGpBmE,EAAAA,OAAO,EAAEhF,QAAQ,CAACC,KAHE;AAIpBmF,EAAAA,eAAe,EAAE,CAJG;AAKpBf,EAAAA,WAAW,EAAExF;AALO,C;;AAqQxB,IAAM6I,aAAa,GAAG3I,SAAS,CAAC6D,OAAD,CAA/B;AAEAR,MAAM,CAACC,MAAP,CAAcqF,aAAd,EAA6BhI,SAA7B;AACA0C,MAAM,CAACC,MAAP,CAAcqF,aAAd,EAA6B1H,QAA7B;AAEA,eAAe0H,aAAf","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n/* global setTimeout, clearTimeout, document */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Popper from 'popper.js';\n\nimport styled from '@emotion/styled';\nimport {withTheme, evaluateStyle} from '../theme';\n\nimport {\n  capitalize,\n  getOppositePosition,\n  generateTriangleStyles,\n  nodeHasParent,\n  positionsToPopperPlacement\n} from './utils';\n\nconst isBrowser = typeof document !== 'undefined' && Boolean(document.createElement);\n\nexport const POSITIONS = {\n  TOP: 'top',\n  RIGHT: 'right',\n  BOTTOM: 'bottom',\n  LEFT: 'left',\n  AUTO: 'auto'\n};\n\nexport const TRIGGERS = {\n  CLICK: 'click',\n  HOVER: 'hover'\n};\n\nconst DEFAULT_ARROW_SIZE = 6;\nconst DEFAULT_BORDER_WIDTH = 1;\n\nconst PopoverComponent = styled.div(props => ({\n  /* Default wrapper style should ideally be display: inline so that popover\n  shows directly beneath child content, inline-flex just generally works\n  better than inline */\n  display: 'inline-flex',\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst PopoverTarget = styled.div(props => ({\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst PopoverContent = styled.div(props => ({\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst PopoverBody = styled.div(props => {\n  let style = null;\n  if (props.position && props.position !== POSITIONS.AUTO && props.arrowSize) {\n    style = {\n      [`margin${capitalize(getOppositePosition(props.position))}`]: props.arrowSize\n    };\n  }\n\n  return {\n    ...props.theme.__reset__,\n    ...style,\n\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    zIndex: 99,\n    background: props.background || props.theme.background,\n    borderStyle: 'solid',\n    borderWidth: props.borderWidth,\n    borderColor: props.borderColor || props.theme.controlColorPrimary,\n    boxShadow: props.theme.shadow,\n\n    fontFamily: props.theme.fontFamily,\n    fontSize: props.theme.fontSize,\n    fontWeight: 'normal',\n\n    ...props.popperStyles,\n    ...evaluateStyle(props.userStyle, props)\n  };\n});\n\nconst OuterArrow = styled.div(props => {\n  /**\n   * We create our arrow triangle using css borders, however this makes it\n   * difficult for us to add an actual border effect to the triangle. In order\n   * to achieve this effect, we generate two arrows and overlap them–an outer\n   * arrow with the border color, and an inner arrow with the background color.\n   */\n\n  const {position, arrowSize, popperOffsets} = props;\n\n  if (!arrowSize) {\n    return null;\n  }\n\n  const arrowOffsets = popperOffsets.arrow || {};\n\n  const style = {\n    borderColor: props.borderColor || props.theme.controlColorPrimary,\n    // Position the arrow to hang off the edge of the popover\n    // For example, a left-facing arrow would need the rule right: -{size}px\n    [getOppositePosition(position)]: -arrowSize\n  };\n\n  // Now apply arrow offsets calculated by popper library (if needed)\n  if (arrowOffsets.top) {\n    style.top = arrowOffsets.top;\n  }\n  if (arrowOffsets.left) {\n    style.left = arrowOffsets.left;\n  }\n\n  return Object.assign(\n    style,\n    evaluateStyle(props.userStyle, props),\n    generateTriangleStyles(position, arrowSize)\n  );\n});\n\nconst InnerArrow = styled.div(props => {\n  const {position, arrowSize} = props;\n\n  if (!arrowSize) {\n    return null;\n  }\n\n  const isVertical = position === POSITIONS.TOP || position === POSITIONS.BOTTOM;\n\n  const style = {\n    borderColor: props.background || props.theme.background\n  };\n\n  // Offset the inner arrow a couple pixels from its parent (the outer arrow)\n  if (isVertical) {\n    style.left = -arrowSize;\n    style.top = position === POSITIONS.TOP ? -arrowSize : 0;\n    style.marginTop = (position === POSITIONS.TOP ? -1 : 1) * props.borderWidth;\n  } else {\n    style.top = -arrowSize;\n    style.left = position === POSITIONS.LEFT ? -arrowSize : 0;\n    style.marginLeft = (position === POSITIONS.LEFT ? -1 : 1) * props.borderWidth;\n  }\n\n  return Object.assign(\n    style,\n    evaluateStyle(props.userStyle, props),\n    generateTriangleStyles(position, arrowSize)\n  );\n});\n\nconst POSITIONS_PROP_TYPE = PropTypes.oneOf([\n  POSITIONS.TOP,\n  POSITIONS.RIGHT,\n  POSITIONS.BOTTOM,\n  POSITIONS.LEFT,\n  POSITIONS.AUTO\n]);\n\nclass Popover extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    style: PropTypes.object,\n    content: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n    position: POSITIONS_PROP_TYPE,\n    // Arrow options\n    arrowPosition: POSITIONS_PROP_TYPE,\n    // Interaction\n    onMouseOutDelay: PropTypes.number,\n    trigger: PropTypes.oneOf([TRIGGERS.HOVER, TRIGGERS.CLICK]),\n    // Support injecting mock Popper class for tests\n    popperClass: PropTypes.func\n  };\n\n  static defaultProps = {\n    className: '',\n    style: {},\n    trigger: TRIGGERS.CLICK,\n    onMouseOutDelay: 0,\n    popperClass: Popper\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = this._getDefaultState(props);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // If we just switched to showing popover, create a new Popper for positioning\n    if (this.state.isVisible && !prevState.isVisible) {\n      const PopperClass = this.props.popperClass;\n      this.popper = new PopperClass(this.$target, this.$popper, {\n        placement: this.state.popperPlacement,\n        modifiers: {\n          // Passing the arrow ref will measure the arrow when calculating styles\n          arrow: {\n            element: this.$arrow,\n            enabled: true\n          },\n          // Disable default styling modifier, and use our custom react one instead\n          applyStyle: {enabled: false},\n          applyReactStyle: {\n            enabled: true,\n            fn: this._handlePopperUpdate,\n            order: 900\n          }\n        }\n      });\n\n      if (this.props.trigger === TRIGGERS.CLICK) {\n        this._addClickEvents();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this._destroyPopover();\n    this._removeClickEvents();\n  }\n\n  _getDefaultState(props) {\n    return {\n      isVisible: false,\n      popperOffsets: {},\n      popperPlacement: positionsToPopperPlacement(props.position, props.arrowPosition),\n      popperStyles: {}\n    };\n  }\n\n  _handleTargetClick = () => {\n    this._togglePopover();\n  };\n\n  _handleTargetMouseEnter = () => {\n    // If onMouseOutDelay is set and mouse is moving from popper back to target,\n    // we want to cancel any timers that would cause it to hide unexpectedly\n    clearTimeout(this.hideTimer);\n\n    this._showPopover();\n  };\n\n  _handleTargetMouseLeave = () => {\n    this._hidePopoverWithDelay();\n  };\n\n  _handlePopoverMouseEnter = () => {\n    clearTimeout(this.hideTimer);\n  };\n\n  _handlePopoverMouseLeave = () => {\n    this._hidePopoverWithDelay();\n  };\n\n  _handleKeyPress = evt => {\n    if (evt.key === 'Escape') {\n      this._hidePopover();\n    }\n  };\n\n  _handlePopperUpdate = data => {\n    this.setState({\n      popperOffsets: data.offsets,\n      popperPlacement: data.placement,\n      popperStyles: data.styles\n    });\n    return data;\n  };\n\n  _showPopover() {\n    this.setState({isVisible: true});\n  }\n\n  _hidePopover = () => {\n    this.setState(this._getDefaultState(this.props));\n    this._destroyPopover();\n  };\n\n  _hidePopoverWithDelay() {\n    const {onMouseOutDelay} = this.props;\n    if (onMouseOutDelay) {\n      this.hideTimer = setTimeout(this._hidePopover, onMouseOutDelay);\n      return;\n    }\n    this._hidePopover();\n  }\n\n  _addClickEvents() {\n    if (!isBrowser) {\n      return;\n    }\n    document.addEventListener('mousedown', this._handleDocumentClick);\n    document.addEventListener('keyup', this._handleKeyPress);\n  }\n\n  _removeClickEvents() {\n    if (!isBrowser) {\n      return;\n    }\n    document.removeEventListener('mousedown', this._handleDocumentClick);\n    document.removeEventListener('keyup', this._handleKeyPress);\n  }\n\n  _handleDocumentClick = evt => {\n    if (\n      !this.$popper ||\n      nodeHasParent(evt.target, this.$popper) ||\n      nodeHasParent(evt.target, this.$target)\n    ) {\n      return;\n    }\n    this._hidePopover();\n  };\n\n  _togglePopover() {\n    const isVisible = !this.state.isVisible;\n    this.setState({isVisible});\n    if (!isVisible) {\n      this._destroyPopover();\n    }\n  }\n\n  _destroyPopover() {\n    if (this.popper) {\n      this.popper.destroy();\n      delete this.popper;\n    }\n    if (this.props.trigger === TRIGGERS.CLICK) {\n      this._removeClickEvents();\n    }\n  }\n\n  _renderTarget(styleProps) {\n    const {trigger, style} = this.props;\n\n    const interactionProps = {};\n    if (trigger === TRIGGERS.HOVER) {\n      interactionProps.onMouseEnter = this._handleTargetMouseEnter;\n      interactionProps.onMouseLeave = this._handleTargetMouseLeave;\n    } else if (trigger === TRIGGERS.CLICK) {\n      interactionProps.onClick = this._handleTargetClick;\n    }\n\n    return (\n      <PopoverTarget\n        {...interactionProps}\n        userStyle={style.target}\n        {...styleProps}\n        ref={el => {\n          this.$target = el;\n        }}\n      >\n        {this.props.children}\n      </PopoverTarget>\n    );\n  }\n\n  _renderArrow(styleProps) {\n    const {style} = this.props;\n\n    return (\n      <OuterArrow\n        userStyle={style.arrowBorder}\n        {...styleProps}\n        ref={el => {\n          this.$arrow = el;\n        }}\n      >\n        <InnerArrow userStyle={style.arrow} {...styleProps} />\n      </OuterArrow>\n    );\n  }\n\n  _renderBody(styleProps) {\n    const {className, style, trigger} = this.props;\n\n    const interactionProps = {};\n    if (trigger === TRIGGERS.HOVER) {\n      interactionProps.onMouseEnter = this._handlePopoverMouseEnter;\n      interactionProps.onMouseLeave = this._handlePopoverMouseLeave;\n    }\n\n    return (\n      <PopoverBody\n        className={className}\n        {...interactionProps}\n        userStyle={style.body}\n        {...styleProps}\n        ref={el => {\n          this.$popper = el;\n        }}\n      >\n        {this._renderContent(styleProps)}\n        {this._renderArrow(styleProps)}\n      </PopoverBody>\n    );\n  }\n\n  _renderContent(styleProps) {\n    const content =\n      typeof this.props.content === 'function' ? this.props.content() : this.props.content;\n    return (\n      <PopoverContent userStyle={this.props.style.content} {...styleProps}>\n        {content}\n      </PopoverContent>\n    );\n  }\n\n  render() {\n    const {theme, style} = this.props;\n    const {isVisible, popperPlacement, popperStyles, popperOffsets} = this.state;\n\n    const [position] = popperPlacement.split('-');\n    const arrowPosition = position === POSITIONS.AUTO ? POSITIONS.TOP : position;\n\n    const styleProps = {\n      theme,\n      arrowSize: 'arrowSize' in style ? style.arrowSize : DEFAULT_ARROW_SIZE,\n      background: style.background,\n      borderWidth: 'borderWidth' in style ? style.borderWidth : DEFAULT_BORDER_WIDTH,\n      borderColor: style.borderColor,\n      position,\n      arrowPosition,\n      popperStyles,\n      popperOffsets,\n      isActive: isVisible\n    };\n    return (\n      <PopoverComponent userStyle={style.popover} {...styleProps}>\n        {this._renderTarget(styleProps)}\n        {isVisible && this._renderBody(styleProps)}\n      </PopoverComponent>\n    );\n  }\n}\n\nconst ThemedPopover = withTheme(Popover);\n\nObject.assign(ThemedPopover, POSITIONS);\nObject.assign(ThemedPopover, TRIGGERS);\n\nexport default ThemedPopover;\n"],"file":"popover.js"}