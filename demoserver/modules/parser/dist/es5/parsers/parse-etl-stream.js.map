{"version":3,"sources":["../../../src/parsers/parse-etl-stream.js"],"names":["noop","parseEtlStream","data","opts","onData","onDone","context","stream","convertPrimitive"],"mappings":";;;;;;;;;;;AAcA;;;;;;AAEA,SAASA,IAAT,GAAgB,CAAE;;AASX,SAASC,cAAT,CAAwBC,IAAxB,EAAyC;AAAA,MAAXC,IAAW,uEAAJ,EAAI;AAAA,qBAEPA,IAFO,CAEvCC,MAFuC;AAAA,MAEvCA,MAFuC,6BAE9BJ,IAF8B;AAAA,qBAEPG,IAFO,CAExBE,MAFwB;AAAA,MAExBA,MAFwB,6BAEfL,IAFe;AAG9C,MAAMM,OAAO,GAAGF,MAAM,CAACD,IAAD,CAAN,IAAgBA,IAAI,CAACG,OAArC;AAEA,MAAMC,MAAM,GAAG,sCAAgBL,IAAhB,EAAsBC,IAAI,CAACK,gBAA3B,CAAf;AAEAH,EAAAA,MAAM,iCAAKF,IAAL;AAAWG,IAAAA,OAAO,EAAPA;AAAX,KAAN;AACA,SAAOC,MAAP;AACD","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {parseXVIZStream} from './parse-xviz-stream';\n\nfunction noop() {}\n\n/**\n * Extract primitives and variables from an XVIZ stream\n *\n * @param {Array} data - datums with shape {primitives, variables}\n * @param {Object} opts - callbacks for event notification\n * @return {Array} - parsed data with shape {time, features, lookAheads, variables, labels}\n */\nexport function parseEtlStream(data, opts = {}) {\n  // Callbacks to enable instrumentation\n  const {onData = noop, onDone = noop} = opts;\n  const context = onData(opts) || opts.context;\n\n  const stream = parseXVIZStream(data, opts.convertPrimitive);\n\n  onDone({...opts, context});\n  return stream;\n}\n"],"file":"parse-etl-stream.js"}