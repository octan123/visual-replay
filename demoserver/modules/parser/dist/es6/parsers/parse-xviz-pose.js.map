{"version":3,"sources":["../../../src/parsers/parse-xviz-pose.js"],"names":["getXVIZConfig","parseXVIZPose","pose","mapOrigin","map_origin","position","orientation","timestamp","origin","result","longitude","latitude","altitude","Object","assign","x","y","z","roll","pitch","yaw","DYNAMIC_STREAM_METADATA","__metadata","category"],"mappings":";;;;;;AAaA,SAAQA,aAAR,QAA4B,uBAA5B;AAGA,OAAO,SAASC,aAAT,CAAuBC,IAAvB,EAA6B;AAGlC,QAAM;AAACC,IAAAA,SAAD;AAAYC,IAAAA,UAAZ;AAAwBC,IAAAA,QAAxB;AAAkCC,IAAAA,WAAlC;AAA+CC,IAAAA;AAA/C,MAA4DL,IAAlE;AACA,QAAMM,MAAM,GAAGJ,UAAU,IAAID,SAA7B;AAEA,QAAMM,MAAM,GAAG;AACbF,IAAAA;AADa,GAAf;;AAIA,MAAIC,MAAJ,EAAY;AACV,UAAM;AAACE,MAAAA,SAAD;AAAYC,MAAAA,QAAZ;AAAsBC,MAAAA;AAAtB,QAAkCJ,MAAxC;AACAK,IAAAA,MAAM,CAACC,MAAP,CAAcL,MAAd,EAAsB;AACpBC,MAAAA,SADoB;AAEpBC,MAAAA,QAFoB;AAGpBC,MAAAA;AAHoB,KAAtB;AAKD;;AAED,MAAIP,QAAJ,EAAc;AACZ,UAAM,CAACU,CAAD,EAAIC,CAAJ,EAAOC,CAAP,IAAYZ,QAAlB;AACAQ,IAAAA,MAAM,CAACC,MAAP,CAAcL,MAAd,EAAsB;AACpBM,MAAAA,CADoB;AAEpBC,MAAAA,CAFoB;AAGpBC,MAAAA;AAHoB,KAAtB;AAKD;;AAED,MAAIX,WAAJ,EAAiB;AACf,UAAM,CAACY,IAAD,EAAOC,KAAP,EAAcC,GAAd,IAAqBd,WAA3B;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAcL,MAAd,EAAsB;AACpBS,MAAAA,IADoB;AAEpBC,MAAAA,KAFoB;AAGpBC,MAAAA;AAHoB,KAAtB;AAKD;;AAED,MAAIpB,aAAa,GAAGqB,uBAApB,EAA6C;AAC3CZ,IAAAA,MAAM,CAACa,UAAP,GAAoB;AAClBC,MAAAA,QAAQ,EAAE;AADQ,KAApB;AAGD;;AAED,yCAAWrB,IAAX,GAAoBO,MAApB;AACD","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport {getXVIZConfig} from '../config/xviz-config';\n\n/* eslint-disable camelcase */\nexport function parseXVIZPose(pose) {\n  // TODO(twojtasz): remove deprecated mapOrigin\n  //                 https://github.com/uber/xviz/issues/394\n  const {mapOrigin, map_origin, position, orientation, timestamp} = pose;\n  const origin = map_origin || mapOrigin;\n\n  const result = {\n    timestamp\n  };\n\n  if (origin) {\n    const {longitude, latitude, altitude} = origin;\n    Object.assign(result, {\n      longitude,\n      latitude,\n      altitude\n    });\n  }\n\n  if (position) {\n    const [x, y, z] = position;\n    Object.assign(result, {\n      x,\n      y,\n      z\n    });\n  }\n\n  if (orientation) {\n    const [roll, pitch, yaw] = orientation;\n    Object.assign(result, {\n      roll,\n      pitch,\n      yaw\n    });\n  }\n\n  if (getXVIZConfig().DYNAMIC_STREAM_METADATA) {\n    result.__metadata = {\n      category: 'POSE'\n    };\n  }\n\n  return {...pose, ...result};\n}\n"],"file":"parse-xviz-pose.js"}