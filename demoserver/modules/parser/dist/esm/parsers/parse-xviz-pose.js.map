{"version":3,"sources":["../../../src/parsers/parse-xviz-pose.js"],"names":["getXVIZConfig","parseXVIZPose","pose","mapOrigin","map_origin","position","orientation","timestamp","origin","result","longitude","latitude","altitude","Object","assign","x","y","z","roll","pitch","yaw","DYNAMIC_STREAM_METADATA","__metadata","category"],"mappings":";;;;;;;AAaA,SAAQA,aAAR,QAA4B,uBAA5B;AAGA,OAAO,SAASC,aAAT,CAAuBC,IAAvB,EAA6B;AAAA,MAG3BC,SAH2B,GAGgCD,IAHhC,CAG3BC,SAH2B;AAAA,MAGhBC,UAHgB,GAGgCF,IAHhC,CAGhBE,UAHgB;AAAA,MAGJC,QAHI,GAGgCH,IAHhC,CAGJG,QAHI;AAAA,MAGMC,WAHN,GAGgCJ,IAHhC,CAGMI,WAHN;AAAA,MAGmBC,SAHnB,GAGgCL,IAHhC,CAGmBK,SAHnB;AAIlC,MAAMC,MAAM,GAAGJ,UAAU,IAAID,SAA7B;AAEA,MAAMM,MAAM,GAAG;AACbF,IAAAA,SAAS,EAATA;AADa,GAAf;;AAIA,MAAIC,MAAJ,EAAY;AAAA,QACHE,SADG,GAC8BF,MAD9B,CACHE,SADG;AAAA,QACQC,QADR,GAC8BH,MAD9B,CACQG,QADR;AAAA,QACkBC,QADlB,GAC8BJ,MAD9B,CACkBI,QADlB;AAEVC,IAAAA,MAAM,CAACC,MAAP,CAAcL,MAAd,EAAsB;AACpBC,MAAAA,SAAS,EAATA,SADoB;AAEpBC,MAAAA,QAAQ,EAARA,QAFoB;AAGpBC,MAAAA,QAAQ,EAARA;AAHoB,KAAtB;AAKD;;AAED,MAAIP,QAAJ,EAAc;AAAA,mCACMA,QADN;AAAA,QACLU,CADK;AAAA,QACFC,CADE;AAAA,QACCC,CADD;;AAEZJ,IAAAA,MAAM,CAACC,MAAP,CAAcL,MAAd,EAAsB;AACpBM,MAAAA,CAAC,EAADA,CADoB;AAEpBC,MAAAA,CAAC,EAADA,CAFoB;AAGpBC,MAAAA,CAAC,EAADA;AAHoB,KAAtB;AAKD;;AAED,MAAIX,WAAJ,EAAiB;AAAA,sCACYA,WADZ;AAAA,QACRY,IADQ;AAAA,QACFC,KADE;AAAA,QACKC,GADL;;AAEfP,IAAAA,MAAM,CAACC,MAAP,CAAcL,MAAd,EAAsB;AACpBS,MAAAA,IAAI,EAAJA,IADoB;AAEpBC,MAAAA,KAAK,EAALA,KAFoB;AAGpBC,MAAAA,GAAG,EAAHA;AAHoB,KAAtB;AAKD;;AAED,MAAIpB,aAAa,GAAGqB,uBAApB,EAA6C;AAC3CZ,IAAAA,MAAM,CAACa,UAAP,GAAoB;AAClBC,MAAAA,QAAQ,EAAE;AADQ,KAApB;AAGD;;AAED,yCAAWrB,IAAX,GAAoBO,MAApB;AACD","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport {getXVIZConfig} from '../config/xviz-config';\n\n/* eslint-disable camelcase */\nexport function parseXVIZPose(pose) {\n  // TODO(twojtasz): remove deprecated mapOrigin\n  //                 https://github.com/uber/xviz/issues/394\n  const {mapOrigin, map_origin, position, orientation, timestamp} = pose;\n  const origin = map_origin || mapOrigin;\n\n  const result = {\n    timestamp\n  };\n\n  if (origin) {\n    const {longitude, latitude, altitude} = origin;\n    Object.assign(result, {\n      longitude,\n      latitude,\n      altitude\n    });\n  }\n\n  if (position) {\n    const [x, y, z] = position;\n    Object.assign(result, {\n      x,\n      y,\n      z\n    });\n  }\n\n  if (orientation) {\n    const [roll, pitch, yaw] = orientation;\n    Object.assign(result, {\n      roll,\n      pitch,\n      yaw\n    });\n  }\n\n  if (getXVIZConfig().DYNAMIC_STREAM_METADATA) {\n    result.__metadata = {\n      category: 'POSE'\n    };\n  }\n\n  return {...pose, ...result};\n}\n"],"file":"parse-xviz-pose.js"}