{"version":3,"sources":["../../../src/cmds/dump.js"],"names":["dumpArgs","inArgs","command","args","dumpMode","oneline","DumpMode","ONELINE","condensed","CONDENSED","ALL","dump","DumpXVIZ","mode","stack"],"mappings":";;;;;;;;AAiBA;;AACA;;AACA;;AAEO,SAASA,QAAT,CAAkBC,MAAlB,EAA0B;AAC/B,SAAOA,MAAM,CAACC,OAAP,CACL,mBADK,EAEL,2BAFK,EAGL,UAAAC,IAAI,EAAI;AACN,iCAAYA,IAAZ;AACA,oCAAeA,IAAf,EAAqB,8BAArB;AACA,qCAAgBA,IAAhB,EAAsB,6BAAtB;AACD,GAPI,EAQL,UAAAA,IAAI,EAAI;AACND,IAAAA,OAAO,CAACC,IAAD,CAAP;AACD,GAVI,CAAP;AAYD;;AAKc,SAASD,OAAT,CAAiBC,IAAjB,EAAuB;AAEpC,MAAMC,QAAQ,GAAI,YAAM;AACtB,QAAID,IAAI,CAACE,OAAT,EAAkB;AAChB,aAAOC,eAASC,OAAhB;AACD,KAFD,MAEO,IAAIJ,IAAI,CAACK,SAAT,EAAoB;AACzB,aAAOF,eAASG,SAAhB;AACD;;AACD,WAAOH,eAASI,GAAhB;AACD,GAPgB,EAAjB;;AAUA,MAAMC,IAAI,GAAG,IAAIC,cAAJ,CAAa;AAACC,IAAAA,IAAI,EAAET;AAAP,GAAb,CAAb;AACA,MAAMU,KAAK,GAAG,CAACH,IAAD,CAAd;AAGA,2BAAWR,IAAX,EAAiBW,KAAjB;AACD","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint no-console: [\"error\", { allow: [\"log\"] }] */\n/* eslint-env node, browser */\n\nimport {addDataArgs, addMetadataArg, addCondensedArg} from '../commonargs';\nimport {DumpXVIZ, DumpMode} from '../dump';\nimport {openSource} from '../connect';\n\nexport function dumpArgs(inArgs) {\n  return inArgs.command(\n    'dump <host> [log]',\n    'Print XVIZ data to stdout',\n    args => {\n      addDataArgs(args);\n      addMetadataArg(args, 'Just fetch metadata and exit');\n      addCondensedArg(args, 'Display summary information');\n    },\n    args => {\n      command(args);\n    }\n  );\n}\n\n/**\n * Validate the content and order of XVIZ messages\n */\nexport default function command(args) {\n  // Determine how verbose the user wants their output\n  const dumpMode = (() => {\n    if (args.oneline) {\n      return DumpMode.ONELINE;\n    } else if (args.condensed) {\n      return DumpMode.CONDENSED;\n    }\n    return DumpMode.ALL;\n  })();\n\n  // The middleware stack handle all messages\n  const dump = new DumpXVIZ({mode: dumpMode});\n  const stack = [dump];\n\n  // Everything async from here...\n  openSource(args, stack);\n}\n"],"file":"dump.js"}