{"version":3,"sources":["../../../src/providers/register.js"],"names":["registerROSBagProvider","rosConfig","converters","DEFAULT_CONVERTERS","BagClass","ROSBag","console","log","config","data","fs","readFileSync","JSON","parse","ros2xvizFactory","ROS2XVIZFactory","rosbagProviderConfig","XVIZProviderFactory","addProviderClass","ROSBagProvider"],"mappings":";;;;;;;;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AAEA;;AAEO,SAASA,sBAAT,CACLC,SADK,EAGL;AAAA,iFADuD,EACvD;AAAA,6BADCC,UACD;AAAA,MADCA,UACD,gCADcC,4BACd;AAAA,2BADkCC,QAClC;AAAA,MADkCA,QAClC,8BAD6CC,cAC7C;;AACA,MAAIJ,SAAJ,EAAe;AACbK,IAAAA,OAAO,CAACC,GAAR,uCAA2CN,SAA3C;AACD;;AAED,MAAIO,MAAM,GAAG,IAAb;;AACA,MAAIP,SAAJ,EAAe;AACb,QAAMQ,IAAI,GAAGC,eAAGC,YAAH,CAAgBV,SAAhB,CAAb;;AACA,QAAIQ,IAAJ,EAAU;AACRD,MAAAA,MAAM,GAAGI,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAT;AACD;AACF;;AAED,MAAMK,eAAe,GAAG,IAAIC,gCAAJ,CAAoBb,UAApB,CAAxB;AACA,MAAMc,oBAAoB,GAAG;AAC3Bf,IAAAA,SAAS,EAAEO,MADgB;AAE3BM,IAAAA,eAAe,EAAfA,eAF2B;AAG3BV,IAAAA,QAAQ,EAARA;AAH2B,GAA7B;;AAMAa,0BAAoBC,gBAApB,CAAqCC,8BAArC,EAAqDH,oBAArD;AACD","sourcesContent":["/* global console */\n/* eslint-disable no-console */\nimport {XVIZProviderFactory} from '@xviz/io';\n\nimport {ROSBag} from '../core/ros-bag';\nimport {ROS2XVIZFactory} from '../core/ros-2-xviz-factory';\nimport {ROSBagProvider} from '../providers/rosbag-provider';\nimport {DEFAULT_CONVERTERS} from '../messages';\n\nimport fs from 'fs';\n\nexport function registerROSBagProvider(\n  rosConfig,\n  {converters = DEFAULT_CONVERTERS, BagClass = ROSBag} = {}\n) {\n  if (rosConfig) {\n    console.log(`Setting up ROSProvider with ${rosConfig}`);\n  }\n\n  let config = null;\n  if (rosConfig) {\n    const data = fs.readFileSync(rosConfig);\n    if (data) {\n      config = JSON.parse(data);\n    }\n  }\n\n  const ros2xvizFactory = new ROS2XVIZFactory(converters);\n  const rosbagProviderConfig = {\n    rosConfig: config,\n    ros2xvizFactory,\n    BagClass\n  };\n\n  XVIZProviderFactory.addProviderClass(ROSBagProvider, rosbagProviderConfig);\n}\n"],"file":"register.js"}