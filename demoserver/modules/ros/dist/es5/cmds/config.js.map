{"version":3,"sources":["../../../src/cmds/config.js"],"names":["configArgs","inArgs","cmd","command","configCmd","args","source","bag","seen","topics","conn","connections","topic","type","push","config","topicConfig","console","log","JSON","stringify"],"mappings":";;;;;;;;;;;;;;AAeA;;AAEO,SAASA,UAAT,CAAoBC,MAApB,EAA4B;AACjC,MAAMC,GAAG,GAAG,cAAZ;AAEA,SAAOD,MAAM,CAACE,OAAP,CACLD,GADK,EAEL,gFAFK,EAGL,EAHK,EAILE,SAJK,CAAP;AAMD;;SAEqBA,S;;;;;+EAAf,iBAAyBC,IAAzB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACOC,YAAAA,MADP,GACiBD,IADjB,CACEE,GADF;AAAA;AAAA,mBAEa,kBAAKD,MAAL,CAFb;;AAAA;AAECC,YAAAA,GAFD;AAICC,YAAAA,IAJD,GAIQ,EAJR;AAKCC,YAAAA,MALD,GAKU,EALV;;AAML,iBAAWC,IAAX,IAAmBH,GAAG,CAACI,WAAvB,EAAoC;AAAA,sCACZJ,GAAG,CAACI,WAAJ,CAAgBD,IAAhB,CADY,EAC3BE,KAD2B,yBAC3BA,KAD2B,EACpBC,IADoB,yBACpBA,IADoB;;AAGlC,kBAAI,CAACL,IAAI,CAACI,KAAD,CAAT,EAAkB;AAChBJ,gBAAAA,IAAI,CAACI,KAAD,CAAJ,GAAc,IAAd;AACAH,gBAAAA,MAAM,CAACK,IAAP,CAAY;AAACF,kBAAAA,KAAK,EAALA,KAAD;AAAQC,kBAAAA,IAAI,EAAJA;AAAR,iBAAZ;AACD;AACF;;AAEKE,YAAAA,MAfD,GAeU;AACbC,cAAAA,WAAW,EAAEP;AADA,aAfV;AAmBLQ,YAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeL,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAAZ;;AAnBK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n/* global console */\n/* eslint-disable no-console, max-depth */\nimport {open} from 'rosbag';\n\nexport function configArgs(inArgs) {\n  const cmd = 'config <bag>';\n\n  return inArgs.command(\n    cmd,\n    'Extracts basic information and outputs a configuration for the XVIZROSProvider',\n    {},\n    configCmd\n  );\n}\n\nexport async function configCmd(args) {\n  const {bag: source} = args;\n  const bag = await open(source);\n\n  const seen = [];\n  const topics = [];\n  for (const conn in bag.connections) {\n    const {topic, type} = bag.connections[conn];\n\n    if (!seen[topic]) {\n      seen[topic] = true;\n      topics.push({topic, type});\n    }\n  }\n\n  const config = {\n    topicConfig: topics\n  };\n\n  console.log(JSON.stringify(config, null, 2));\n}\n"],"file":"config.js"}