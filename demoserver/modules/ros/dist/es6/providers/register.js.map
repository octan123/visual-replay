{"version":3,"sources":["../../../src/providers/register.js"],"names":["XVIZProviderFactory","ROSBag","ROS2XVIZFactory","ROSBagProvider","DEFAULT_CONVERTERS","fs","registerROSBagProvider","rosConfig","converters","BagClass","console","log","config","data","readFileSync","JSON","parse","ros2xvizFactory","rosbagProviderConfig","addProviderClass"],"mappings":"AAEA,SAAQA,mBAAR,QAAkC,UAAlC;AAEA,SAAQC,MAAR,QAAqB,iBAArB;AACA,SAAQC,eAAR,QAA8B,4BAA9B;AACA,SAAQC,cAAR,QAA6B,8BAA7B;AACA,SAAQC,kBAAR,QAAiC,aAAjC;AAEA,OAAOC,EAAP,MAAe,IAAf;AAEA,OAAO,SAASC,sBAAT,CACLC,SADK,EAEL;AAACC,EAAAA,UAAU,GAAGJ,kBAAd;AAAkCK,EAAAA,QAAQ,GAAGR;AAA7C,IAAuD,EAFlD,EAGL;AACA,MAAIM,SAAJ,EAAe;AACbG,IAAAA,OAAO,CAACC,GAAR,uCAA2CJ,SAA3C;AACD;;AAED,MAAIK,MAAM,GAAG,IAAb;;AACA,MAAIL,SAAJ,EAAe;AACb,UAAMM,IAAI,GAAGR,EAAE,CAACS,YAAH,CAAgBP,SAAhB,CAAb;;AACA,QAAIM,IAAJ,EAAU;AACRD,MAAAA,MAAM,GAAGG,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAT;AACD;AACF;;AAED,QAAMI,eAAe,GAAG,IAAIf,eAAJ,CAAoBM,UAApB,CAAxB;AACA,QAAMU,oBAAoB,GAAG;AAC3BX,IAAAA,SAAS,EAAEK,MADgB;AAE3BK,IAAAA,eAF2B;AAG3BR,IAAAA;AAH2B,GAA7B;AAMAT,EAAAA,mBAAmB,CAACmB,gBAApB,CAAqChB,cAArC,EAAqDe,oBAArD;AACD","sourcesContent":["/* global console */\n/* eslint-disable no-console */\nimport {XVIZProviderFactory} from '@xviz/io';\n\nimport {ROSBag} from '../core/ros-bag';\nimport {ROS2XVIZFactory} from '../core/ros-2-xviz-factory';\nimport {ROSBagProvider} from '../providers/rosbag-provider';\nimport {DEFAULT_CONVERTERS} from '../messages';\n\nimport fs from 'fs';\n\nexport function registerROSBagProvider(\n  rosConfig,\n  {converters = DEFAULT_CONVERTERS, BagClass = ROSBag} = {}\n) {\n  if (rosConfig) {\n    console.log(`Setting up ROSProvider with ${rosConfig}`);\n  }\n\n  let config = null;\n  if (rosConfig) {\n    const data = fs.readFileSync(rosConfig);\n    if (data) {\n      config = JSON.parse(data);\n    }\n  }\n\n  const ros2xvizFactory = new ROS2XVIZFactory(converters);\n  const rosbagProviderConfig = {\n    rosConfig: config,\n    ros2xvizFactory,\n    BagClass\n  };\n\n  XVIZProviderFactory.addProviderClass(ROSBagProvider, rosbagProviderConfig);\n}\n"],"file":"register.js"}